
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Dev Project Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Rajdhani:wght@700&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }
        body { 
            font-family: 'Inter', sans-serif; 
            background-image: url('https://images.pexels.com/photos/2138922/pexels-photo-2138922.jpeg?auto=compress&cs=tinysrgb&w=1920&h=1080&dpr=2');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-color: #0c0a09; /* A dark fallback */
            color: #e2e8f0; /* slate-200 */
        }
        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 1rem;
            position: relative;
        }
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.8) 100%);
        }
        .hero > * {
            position: relative;
            z-index: 2;
        }

        .neon-title {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 700;
            color: #f0f9ff;
            text-shadow:
                0 0 7px rgba(255, 255, 255, 0.8),
                0 0 10px rgba(255, 255, 255, 0.6),
                0 0 21px rgba(255, 255, 255, 0.4),
                0 0 42px #0ea5e9,
                0 0 82px #0ea5e9,
                0 0 92px #0ea5e9,
                0 0 102px #0ea5e9,
                0 0 151px #0ea5e9;
        }
        
        .neon-button {
            background-color: transparent;
            border: 2px solid #0ea5e9;
            color: #0ea5e9;
            padding: 0.75rem 2rem;
            border-radius: 0.5rem;
            text-transform: uppercase;
            font-weight: bold;
            letter-spacing: 0.1em;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 0 10px -5px rgba(14, 165, 233, 0.8), inset 0 0 10px -5px rgba(14, 165, 233, 0.8);
            text-shadow: 0 0 2px rgba(14, 165, 233, 0.5);
        }
        
        .neon-button:hover, .neon-button:focus {
            color: #fff;
            background-color: #0ea5e9;
            box-shadow: 0 0 20px #0ea5e9, 0 0 40px #0ea5e9;
            transform: translateY(-2px);
        }

        #app {
            background-color: rgba(15, 23, 42, 0.7); /* slate-900 with opacity */
            backdrop-filter: blur(12px) saturate(150%);
            -webkit-backdrop-filter: blur(12px) saturate(150%);
            border: 1px solid rgba(51, 65, 85, 0.4); /* slate-700 with opacity */
        }

        .sidebar-icon { width: 1.5rem; height: 1.5rem; }
        .nav-link { display: flex; align-items: center; padding: 0.75rem 1rem; border-radius: 0.5rem; transition: background-color 0.2s, color 0.2s; }
        .nav-link.active { background-color: #0c4a6e; color: #f0f9ff; font-weight: 600; text-shadow: 0 0 5px #0ea5e9; }
        .nav-link:not(.active):hover { background-color: rgba(30, 41, 59, 0.7); }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        @media (max-width: 768px) { .chart-container { height: 300px; } }
        .step-connector { content: ''; position: absolute; left: 50%; top: 2.5rem; height: calc(100% - 2.5rem); border-left: 2px dashed #475569; z-index: -1; }
        .blinking-cursor { animation: blink 1s step-end infinite; }
        @keyframes blink { 50% { border-color: transparent; } }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        #webhook-url-modal.hidden { display: none; }
        .workflow-content { display: none; }
        .workflow-content.active { display: block; }
        #custom-instructions-panel { transition: transform 0.3s ease-in-out; }
        #instructions-backdrop.hidden { display: none; }
        .line-prefix::before { content: " > "; color: #38bdf8; }
        #simulation-output { counter-reset: line; }
        #simulation-output .line::before {
            content: counter(line); counter-increment: line; display: inline-block;
            text-align: right; width: 2.5em; padding-right: 0.5em; margin-right: 0.5em;
            color: #64748b; border-right: 1px solid #475569;
        }
        .vitals-good { color: #22c55e; } .vitals-ni { color: #f97316; } .vitals-poor { color: #ef4444; }
        .neon-blue-outline {
            border: 1px solid #0ea5e9;
            box-shadow: 0 0 5px rgba(14, 165, 233, 0.4), 0 0 10px rgba(14, 165, 233, 0.2);
        }
        #deployment-modal.hidden { display: none; }
        
        /* Glass panel styling for components inside the app */
        .glass-panel {
            background-color: rgba(30, 41, 59, 0.6) !important; /* slate-800/60 */
            border: 1px solid rgba(71, 85, 105, 0.4); /* slate-600/40 */
        }
        .glass-panel-darker {
            background-color: rgba(15, 23, 42, 0.7) !important; /* slate-900/70 */
             border: 1px solid rgba(71, 85, 105, 0.4) !important; /* slate-600/40 */
        }

        /* Adjustments for better readability on glass background */
        #sidebar { background-color: rgba(15, 23, 42, 0.6) !important; border-color: rgba(51, 65, 85, 0.5); }
        main { background-color: transparent !important; }
        header.md\\:hidden { background-color: rgba(15, 23, 42, 0.8) !important; border-color: rgba(51, 65, 85, 0.5); backdrop-filter: blur(8px); }
    </style>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.10.0"
  }
}
</script>
</head>
<body class="bg-slate-900 text-slate-300">
    <div class="hero">
        <h1 class="text-5xl md:text-7xl lg:text-8xl mb-4 neon-title">WEB DEV HUB</h1>
        <p class="text-lg md:text-xl text-slate-300 mb-8 max-w-2xl px-4 font-light" style="text-shadow: 1px 1px 3px rgba(0,0,0,0.7);">
            Your Mission Control for Modern Web Development.
            <br class="hidden md:block" />
            Orchestrate, build, and deploy with AI-driven tooling.
        </p>
        <a href="#app" class="neon-button text-lg">
            Launch Dashboard
        </a>
    </div>

    <div id="app" class="flex min-h-[90vh] rounded-xl mx-auto max-w-[95%] mb-16 shadow-2xl shadow-sky-900/20">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-64 border-r p-4 flex-col justify-between hidden md:flex transition-all duration-300">
            <div>
                <div class="flex items-center gap-3 mb-8">
                    <div class="p-2 bg-sky-900/50 rounded-lg">
                        <span class="text-2xl">‚ö°Ô∏è</span>
                    </div>
                    <h1 class="text-lg font-bold text-slate-100">Web Dev Hub</h1>
                </div>
                <nav id="main-nav" class="space-y-2">
                    <a href="#dashboard" class="nav-link active text-slate-200">
                        <span class="sidebar-icon mr-3">üè†</span>
                        <span>Dashboard</span>
                    </a>
                    <a href="#stack" class="nav-link text-slate-300">
                         <span class="sidebar-icon mr-3">üèóÔ∏è</span>
                        <span>Project Stack</span>
                    </a>
                    <a href="#components" class="nav-link text-slate-300">
                       <span class="sidebar-icon mr-3">üß±</span>
                        <span>Component Library</span>
                    </a>
                    <a href="#api" class="nav-link text-slate-300">
                        <span class="sidebar-icon mr-3">üîå</span>
                        <span>API Endpoints</span>
                    </a>
                    <a href="#tooling" class="nav-link text-slate-300">
                         <span class="sidebar-icon mr-3">üõ†Ô∏è</span>
                        <span>CLI & Tooling</span>
                    </a>
                    <a href="#analytics" class="nav-link text-slate-300">
                         <span class="sidebar-icon mr-3">üìä</span>
                        <span>Build Analytics</span>
                    </a>
                    <a href="#playground" class="nav-link text-slate-300">
                         <span class="sidebar-icon mr-3">‚ñ∂Ô∏è</span>
                        <span>Code Playground</span>
                    </a>
                    <a href="#schemas" class="nav-link text-slate-300">
                        <span class="sidebar-icon mr-3">üß¨</span>
                        <span>UI Schemas</span>
                    </a>
                     <a href="#starters" class="nav-link text-slate-300">
                        <span class="sidebar-icon mr-3">üöÄ</span>
                        <span>Starter Kits</span>
                    </a>
                    <a href="#webhooks" class="nav-link text-slate-300">
                        <span class="sidebar-icon mr-3">ü™ù</span>
                        <span>CI/CD Webhooks</span>
                    </a>
                    <a href="#deployment" class="nav-link text-slate-300">
                        <span class="sidebar-icon mr-3">‚òÅÔ∏è</span>
                        <span>Deployment Targets</span>
                    </a>
                </nav>
            </div>
            <div class="text-xs text-slate-500 p-4">Project Hub v1.0</div>
        </aside>

<!-- Mobile Header -->
<header class="md:hidden flex items-center justify-between w-full p-4 border-b fixed top-0 left-0 z-50">
     <div class="flex items-center gap-3">
        <div class="p-2 bg-sky-900/50 rounded-lg">
            <span class="text-2xl">‚ö°Ô∏è</span>
        </div>
        <h1 class="text-lg font-bold text-slate-100">Web Dev Hub</h1>
    </div>
    <button id="mobile-menu-button" class="p-2 text-slate-300">
        <span class="text-2xl">‚ò∞</span>
    </button>
</header>

<!-- Main Content -->
<main class="flex-1 overflow-y-auto p-6 md:p-8 pt-24 md:pt-8 relative">
    <button id="toggle-instructions-button" class="fixed top-6 right-6 md:top-8 md:right-8 z-50 p-2 bg-slate-700 rounded-full text-slate-300 hover:bg-slate-600 transition-colors" title="Custom Instructions">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
        </svg>
    </button>
    <div id="content-container" class="max-w-7xl mx-auto">
        
        <!-- Dashboard Section -->
        <section id="dashboard" class="content-section active fade-in">
            <h2 class="text-3xl font-bold text-slate-100">Web Dev Project Hub</h2>
            <p class="text-lg text-slate-400 mt-2 mb-8">A unified dashboard for orchestrating modern web development projects with Vue, Vite, and Node.js.</p>
            
            <div class="glass-panel-darker p-6 rounded-lg mb-8">
                <h3 class="text-xl font-semibold mb-4 text-slate-100">Core Philosophy</h3>
                <p class="text-slate-400 mb-6">This platform is built on modern web development principles to ensure a fast, scalable, and maintainable workflow. Explore these principles below.</p>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="glass-panel p-5 rounded-lg hover:bg-slate-700/80 transition-colors">
                        <h4 class="font-bold text-sky-400 mb-2">Component-Driven UI</h4>
                        <p class="text-sm text-slate-400">Emphasize building UIs from reusable, encapsulated Vue components, enhanced with the aesthetics and functionality of shadcn-vue.</p>
                    </div>
                    <div class="glass-panel p-5 rounded-lg hover:bg-slate-700/80 transition-colors">
                        <h4 class="font-bold text-sky-400 mb-2">Vite-Powered Builds</h4>
                        <p class="text-sm text-slate-400">Leverage Vite for lightning-fast Hot Module Replacement (HMR) in development and highly optimized builds for production.</p>
                    </div>
                    <div class="glass-panel p-5 rounded-lg hover:bg-slate-700/80 transition-colors">
                        <h4 class="font-bold text-sky-400 mb-2">Node.js Backend</h4>
                        <p class="text-sm text-slate-400">Build robust, scalable backends and APIs with Node.js and Express, providing a solid foundation for your frontend application.</p>
                    </div>
                </div>
            </div>
             <div class="grid md:grid-cols-2 gap-8">
                <div class="glass-panel-darker p-6 rounded-lg">
                    <h3 class="text-xl font-semibold mb-4 text-slate-100">Frontend Frameworks</h3>
                     <p class="text-slate-400 mb-6">This hub is optimized for Vue.js but is built on principles applicable across the modern frontend ecosystem. This chart shows a conceptual overview of their strengths.</p>
                     <div class="chart-container">
                        <canvas id="frameworkChart"></canvas>
                    </div>
                </div>
                <div class="glass-panel-darker p-6 rounded-lg">
                     <h3 class="text-xl font-semibold mb-4 text-slate-100">Interactive Exploration</h3>
                     <p class="text-slate-400 mb-6">This interactive application is designed to guide you through a modern development workflow. Use the navigation on the left to explore different components:</p>
                     <ul class="space-y-4">
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-sky-900 text-sky-300 flex items-center justify-center mr-3 mt-1 font-bold text-xs">1</div>
                            <div>
                                <h4 class="font-semibold text-slate-200">Define UI & Data Schemas</h4>
                                <p class="text-slate-400 text-sm">Create validation logic for forms and API data structures using Zod.</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-sky-900 text-sky-300 flex items-center justify-center mr-3 mt-1 font-bold text-xs">2</div>
                            <div>
                                <h4 class="font-semibold text-slate-200">Simulate Build Processes</h4>
                                <p class="text-slate-400 text-sm">Watch step-by-step as a starter kit is scaffolded and configured.</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-sky-900 text-sky-300 flex items-center justify-center mr-3 mt-1 font-bold text-xs">3</div>
                            <div>
                                <h4 class="font-semibold text-slate-200">Use the Live Code Playground</h4>
                                <p class="text-slate-400 text-sm">Interact with a live Gemini model to generate code and get expert advice.</p>
                            </div>
                        </li>
                     </ul>
                </div>
            </div>
        </section>

        <!-- Project Stack Section -->
        <section id="stack" class="content-section fade-in">
            <h2 class="text-3xl font-bold text-slate-100">Modern Web Stack</h2>
            <p class="text-lg text-slate-400 mt-2 mb-8">Our stack is organized into logical layers, from the frontend framework to the deployment target. Hover over a component to learn more.</p>
            <div id="architecture-diagram" class="glass-panel-darker p-6 rounded-lg">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center text-sm">
                    <!-- Developer -->
                    <div class="md:col-span-3 p-4 rounded-lg glass-panel">
                        <h4 class="font-bold text-slate-200">üë§ Developer</h4>
                        <div class="mt-2 p-3 bg-slate-700/70 rounded shadow-sm inline-block arch-component text-slate-200" data-title="Developer" data-description="The engineer using the Dev Hub to build, test, and deploy applications.">Developer</div>
                    </div>
                    
                    <!-- Down Arrow -->
                    <div class="md:col-span-3 flex justify-center items-center text-slate-500">‚Üì</div>

                    <!-- Frontend -->
                    <div class="p-4 rounded-lg bg-sky-900/30 border border-sky-800 arch-component" data-title="Frontend (Vue + Vite)" data-description="The user interface layer built with the Vue.js framework and bundled with Vite for a superior developer experience.">
                        <h4 class="font-bold text-sky-400">üöÄ Frontend (Vue + Vite)</h4>
                        <div class="mt-2 p-3 bg-slate-700/70 rounded shadow-sm text-slate-200">Shadcn-Vue UI Kit</div>
                        <div class="mt-2 p-3 bg-slate-700/70 rounded shadow-sm text-slate-200">Tailwind CSS</div>
                    </div>
                    
                    <!-- Right Arrow -->
                    <div class="flex justify-center items-center text-slate-500 transform md:rotate-0 rotate-90">‚Üí</div>

                    <!-- API Layer -->
                    <div class="p-4 rounded-lg bg-amber-900/30 border border-amber-800 arch-component" data-title="API Layer (Express.js)" data-description="The communication layer that connects the frontend to the backend using a REST or GraphQL API built with Express.js.">
                        <h4 class="font-bold text-amber-400">ü§ù API Layer (Express.js)</h4>
                        <div class="mt-2 p-3 bg-slate-700/70 rounded shadow-sm text-slate-200">REST / GraphQL</div>
                        <div class="mt-2 p-3 bg-slate-700/70 rounded shadow-sm text-slate-200">Auth Middleware</div>
                    </div>
                </div>
                
                 <!-- Down Arrows -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center text-slate-500 my-4">
                    <div></div>
                    <div class="flex justify-center items-center">‚Üì</div>
                    <div class="flex justify-center items-center">‚Üì</div>
                </div>

                 <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center text-sm">
                     <!-- Third-Party Services -->
                    <div class="p-4 rounded-lg bg-emerald-900/30 border border-emerald-800 arch-component" data-title="Third-Party Services" data-description="External services integrated into the application, such as databases, authentication providers, and payment gateways.">
                        <h4 class="font-bold text-emerald-400">üîó Third-Party Services</h4>
                        <div class="mt-2 p-3 bg-slate-700/70 rounded shadow-sm text-slate-200">Database (Postgres/Mongo)</div>
                        <div class="mt-2 p-3 bg-slate-700/70 rounded shadow-sm text-slate-200">Authentication (Clerk/Auth0)</div>
                    </div>

                     <!-- Left Arrow -->
                    <div class="flex justify-center items-center text-slate-500 transform md:rotate-0 rotate-90">‚Üê</div>

                     <!-- Backend -->
                    <div class="p-4 rounded-lg bg-rose-900/30 border border-rose-800 arch-component" data-title="Backend (Node.js)" data-description="The server-side logic of the application, responsible for business logic, data persistence (via an ORM), and integrations.">
                        <h4 class="font-bold text-rose-400">‚öôÔ∏è Backend (Node.js)</h4>
                        <div class="mt-2 p-3 bg-slate-700/70 rounded shadow-sm text-slate-200">Business Logic (Services)</div>
                        <div class="mt-2 p-3 bg-slate-700/70 rounded shadow-sm text-slate-200">Database ORM (Prisma/Mongoose)</div>
                    </div>
                 </div>
            </div>
            <div id="arch-tooltip" class="hidden absolute bg-slate-900/80 backdrop-blur-sm text-white text-xs rounded py-1 px-2 z-50 transition-opacity duration-300 border border-slate-700"></div>
        </section>
        
        <!-- Component Library Section -->
        <section id="components" class="content-section fade-in">
            <h2 class="text-3xl font-bold text-slate-100">Component Architecture</h2>
            <p class="text-lg text-slate-400 mt-2 mb-8">The heart of the frontend, built on a robust and scalable component model inspired by modern best practices.</p>

            <div>
                <div class="mb-4 border-b border-slate-700">
                    <nav id="agent-archetype-tabs" class="flex -mb-px" aria-label="Tabs">
                        <button class="agent-tab active w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm text-sky-400 border-sky-500">
                            Smart Components
                        </button>
                        <button class="agent-tab w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm text-slate-400 border-transparent hover:text-slate-300 hover:border-slate-600">
                            Presentational Components
                        </button>
                        <button class="agent-tab w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm text-slate-400 border-transparent hover:text-slate-300 hover:border-slate-600">
                            Composable Functions
                        </button>
                    </nav>
                </div>
                <div id="agent-archetype-content">
                    <div class="agent-content active p-6 glass-panel-darker rounded-lg">
                        <h3 class="font-semibold text-lg mb-2 text-slate-100">Smart Components: The Brains</h3>
                        <p class="text-slate-400 mb-6">Also known as container components, these are responsible for data fetching, state management, and business logic. They often use composable functions (e.g., `useQuery`) to fetch data and then pass it down as props to simpler, presentational components. They are aware of the application's state (e.g., via Pinia).</p>
                        <div class="grid md:grid-cols-2 gap-6">
                            <!-- Example 1: UserProfileContainer.vue -->
                            <div class="glass-panel border-slate-700 rounded-lg overflow-hidden flex flex-col">
                                <div class="p-4 border-b border-slate-700">
                                    <h4 class="font-mono text-sm text-sky-400">UserProfileContainer.vue</h4>
                                </div>
                                <div class="p-4 bg-black/50 font-mono text-xs flex-grow">
                                    <pre class="whitespace-pre-wrap"><code class="language-html">&lt;<span class="text-rose-400">script</span> setup&gt;
<span class="text-sky-400">import</span> { onMounted } <span class="text-sky-400">from</span> <span class="text-amber-400">'vue'</span>
<span class="text-sky-400">import</span> UserProfileCard <span class="text-sky-400">from</span> <span class="text-amber-400">'./UserProfileCard.vue'</span>
<span class="text-sky-400">import</span> { useApi } <span class="text-sky-400">from</span> <span class="text-amber-400">'../composables/useApi'</span>

<span class="text-rose-400">const</span> { data: user, loading, error, fetchData } = useApi(<span class="text-amber-400">'/api/user/1'</span>)

onMounted(fetchData)
&lt;/<span class="text-rose-400">script</span>&gt;

&lt;<span class="text-rose-400">template</span>&gt;
  &lt;<span class="text-rose-400">div</span>&gt;
    &lt;<span class="text-rose-400">p</span> v-if="loading"&gt;Loading user profile...&lt;/<span class="text-rose-400">p</span>&gt;
    &lt;<span class="text-rose-400">p</span> v-else-if="error"&gt;Error: {{ error.message }}&lt;/<span class="text-rose-400">p</span>&gt;
    &lt;<span class="text-rose-400">UserProfileCard</span> v-else-if="user" :user="user" /&gt;
  &lt;/<span class="text-rose-400">div</span>&gt;
&lt;/<span class="text-rose-400">template</span>&gt;</code></pre>
                                </div>
                                <div class="p-4 border-t border-slate-700 mt-auto">
                                    <h5 class="text-sm font-semibold mb-2 text-slate-300">Preview</h5>
                                    <div class="bg-slate-700/80 p-4 rounded-md text-slate-400 text-center text-sm">
                                        Loading user profile...
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Example 2: ProductListContainer.vue -->
                            <div class="glass-panel border-slate-700 rounded-lg overflow-hidden flex flex-col">
                                 <div class="p-4 border-b border-slate-700">
                                    <h4 class="font-mono text-sm text-sky-400">ProductListContainer.vue</h4>
                                </div>
                                 <div class="p-4 bg-black/50 font-mono text-xs flex-grow">
                                     <pre class="whitespace-pre-wrap"><code class="language-html">&lt;<span class="text-rose-400">script</span> setup&gt;
<span class="text-sky-400">import</span> { useProductStore } <span class="text-sky-400">from</span> <span class="text-amber-400">'../stores/products'</span>
<span class="text-sky-400">import</span> ProductGrid <span class="text-sky-400">from</span> <span class="text-amber-400">'./ProductGrid.vue'</span>
<span class="text-sky-400">import</span> { storeToRefs } <span class="text-sky-400">from</span> <span class="text-amber-400">'pinia'</span>

<span class="text-rose-400">const</span> store = useProductStore()
<span class="text-rose-400">const</span> { filteredProducts } = storeToRefs(store)

<span class="text-slate-500">// Fetch on component mount or in a layout</span>
store.fetchProducts()
&lt;/<span class="text-rose-400">script</span>&gt;

&lt;<span class="text-rose-400">template</span>&gt;
  &lt;<span class="text-rose-400">div</span>&gt;
    &lt;!-- Filter UI could go here --&gt;
    &lt;<span class="text-rose-400">ProductGrid</span> :products="filteredProducts" /&gt;
  &lt;/<span class="text-rose-400">div</span>&gt;
&lt;/<span class="text-rose-400">template</span>&gt;</code></pre>
                                </div>
                                 <div class="p-4 border-t border-slate-700 mt-auto">
                                    <h5 class="text-sm font-semibold mb-2 text-slate-300">Preview</h5>
                                    <div class="bg-slate-700/80 p-4 rounded-md text-slate-400 text-center text-sm">
                                        (Renders a grid of products from a global store)
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="agent-content hidden p-6 glass-panel-darker rounded-lg">
                        <h3 class="font-semibold text-lg mb-2 text-slate-100">Presentational Components: The Looks</h3>
                        <p class="text-slate-400 mb-6">Also known as 'dumb' or 'pure' components, these are focused solely on UI. They receive data via props and communicate with their parent via events (`emits`). They have no knowledge of the application's state or data sources, making them highly reusable and easy to test. Most components from a library like shadcn-vue fall into this category.</p>
                        <div class="grid md:grid-cols-2 gap-6">
                            <!-- Example 1: UserProfileCard.vue -->
                            <div class="glass-panel border-slate-700 rounded-lg overflow-hidden flex flex-col">
                                <div class="p-4 border-b border-slate-700">
                                    <h4 class="font-mono text-sm text-sky-400">UserProfileCard.vue</h4>
                                </div>
                                <div class="p-4 bg-black/50 font-mono text-xs flex-grow">
                                    <pre class="whitespace-pre-wrap"><code class="language-html">&lt;<span class="text-rose-400">script</span> setup&gt;
<span class="text-sky-400">defineProps</span>({
  user: { type: Object, required: true }
})

<span class="text-rose-400">const</span> emit = defineEmits([<span class="text-amber-400">'send-message'</span>])
&lt;/<span class="text-rose-400">script</span>&gt;

&lt;<span class="text-rose-400">template</span>&gt;
  &lt;<span class="text-rose-400">div</span> class="user-card"&gt;
    &lt;<span class="text-rose-400">img</span> :src="user.avatarUrl" /&gt;
    &lt;<span class="text-rose-400">h3</span>&gt;{{ user.name }}&lt;/<span class="text-rose-400">h3</span>&gt;
    &lt;<span class="text-rose-400">p</span>&gt;{{ user.bio }}&lt;/<span class="text-rose-400">p</span>&gt;
    &lt;<span class="text-rose-400">button</span> @click="emit(<span class="text-amber-400">'send-message'</span>, user.id)"&gt;
      Message
    &lt;/<span class="text-rose-400">button</span>&gt;
  &lt;/<span class="text-rose-400">div</span>&gt;
&lt;/<span class="text-rose-400">template</span>&gt;</code></pre>
                                </div>
                                <div class="p-4 border-t border-slate-700 mt-auto">
                                    <h5 class="text-sm font-semibold mb-2 text-slate-300">Preview</h5>
                                    <div class="bg-slate-700/80 p-4 rounded-md text-slate-800 border border-slate-600">
                                        <div class="flex items-center space-x-4">
                                            <div class="w-12 h-12 rounded-full bg-slate-400 flex-shrink-0"></div>
                                            <div>
                                                <div class="h-4 w-24 bg-slate-400 rounded"></div>
                                                <div class="h-3 w-32 bg-slate-300 rounded mt-2"></div>
                                            </div>
                                        </div>
                                         <div class="mt-4 h-8 w-full bg-sky-500 rounded text-white text-xs flex items-center justify-center font-semibold">Message</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Example 2: BaseButton.vue -->
                            <div class="glass-panel border-slate-700 rounded-lg overflow-hidden flex flex-col">
                                 <div class="p-4 border-b border-slate-700">
                                    <h4 class="font-mono text-sm text-sky-400">BaseButton.vue</h4>
                                </div>
                                 <div class="p-4 bg-black/50 font-mono text-xs flex-grow">
                                    <pre class="whitespace-pre-wrap"><code class="language-html">&lt;<span class="text-rose-400">script</span> setup&gt;
<span class="text-sky-400">defineProps</span>({
  variant: {
    type: String,
    default: <span class="text-amber-400">'primary'</span>, <span class="text-slate-500">// 'primary' or 'secondary'</span>
  }
})
&lt;/<span class="text-rose-400">script</span>&gt;

&lt;<span class="text-rose-400">template</span>&gt;
  &lt;<span class="text-rose-400">button</span> :class="['btn', `btn--${variant}`]"&gt;
    &lt;<span class="text-rose-400">slot</span> /&gt;
  &lt;/<span class="text-rose-400">button</span>&gt;
&lt;/<span class="text-rose-400">template</span>&gt;

&lt;<span class="text-rose-400">style</span> scoped&gt;
.btn { padding: 8px 16px; border-radius: 6px; }
.btn--primary { background: #0ea5e9; color: white; }
.btn--secondary { background: #64748b; color: white; }
&lt;/<span class="text-rose-400">style</span>&gt;</code></pre>
                                </div>
                                 <div class="p-4 border-t border-slate-700 mt-auto">
                                    <h5 class="text-sm font-semibold mb-2 text-slate-300">Preview</h5>
                                     <div class="bg-slate-700/80 p-4 rounded-md text-slate-800 flex items-center justify-center space-x-4 border border-slate-600">
                                        <div class="h-8 px-4 bg-sky-500 rounded text-white text-xs flex items-center justify-center font-semibold">Primary</div>
                                        <div class="h-8 px-4 bg-slate-500 rounded text-white text-xs flex items-center justify-center font-semibold">Secondary</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="agent-content hidden p-6 glass-panel-darker rounded-lg">
                         <h3 class="font-semibold text-lg mb-2 text-slate-100">Composable Functions: The Logic</h3>
                        <p class="text-slate-400 mb-6">Leveraging Vue's Composition API, these are reusable pieces of stateful logic (e.g., `useCounter`, `useApi`, `useMousePosition`). They encapsulate logic that can be shared across multiple components, preventing code duplication and keeping components lean. They are the primary mechanism for creating clean, maintainable, and scalable Vue applications.</p>
                         <div class="grid md:grid-cols-2 gap-6">
                            <!-- Example 1: useApi.js -->
                            <div class="glass-panel border-slate-700 rounded-lg overflow-hidden flex flex-col">
                                <div class="p-4 border-b border-slate-700">
                                    <h4 class="font-mono text-sm text-sky-400">composables/useApi.js</h4>
                                </div>
                                <div class="p-4 bg-black/50 font-mono text-xs flex-grow">
                                    <pre class="whitespace-pre-wrap"><code class="language-javascript"><span class="text-sky-400">import</span> { ref } <span class="text-sky-400">from</span> <span class="text-amber-400">'vue'</span>

<span class="text-sky-400">export function</span> useApi(url) {
  <span class="text-rose-400">const</span> data = ref(null)
  <span class="text-rose-400">const</span> loading = ref(false)
  <span class="text-rose-400">const</span> error = ref(null)

  <span class="text-rose-400">const</span> fetchData = <span class="text-sky-400">async</span> () => {
    loading.value = true
    <span class="text-sky-400">try</span> {
      <span class="text-rose-400">const</span> res = <span class="text-sky-400">await</span> fetch(url)
      data.value = <span class="text-sky-400">await</span> res.json()
    } <span class="text-sky-400">catch</span> (e) { error.value = e } 
    <span class="text-sky-400">finally</span> { loading.value = false }
  }

  <span class="text-sky-400">return</span> { data, loading, error, fetchData }
}</code></pre>
                                </div>
                                <div class="p-4 border-t border-slate-700 mt-auto">
                                    <h5 class="text-sm font-semibold mb-2 text-slate-300">Usage &amp; State</h5>
                                    <div class="bg-slate-700/80 p-4 rounded-md text-slate-400 text-xs font-mono space-y-1">
                                       <p>&gt; <span class="text-slate-200">const { data, loading } = useApi('/api/...')</span></p>
                                       <p class="text-slate-500">// Returns reactive state</p>
                                       <p>&gt; <span class="text-slate-200">loading.value</span> // <span class="text-sky-400">true</span></p>
                                       <p>&gt; <span class="text-slate-200">data.value</span>    // <span class="text-rose-400">null</span></p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Example 2: useMousePosition.js -->
                            <div class="glass-panel border-slate-700 rounded-lg overflow-hidden flex flex-col">
                                 <div class="p-4 border-b border-slate-700">
                                    <h4 class="font-mono text-sm text-sky-400">composables/useMouse.js</h4>
                                </div>
                                 <div class="p-4 bg-black/50 font-mono text-xs flex-grow">
                                    <pre class="whitespace-pre-wrap"><code class="language-javascript"><span class="text-sky-400">import</span> { ref, onMounted, onUnmounted } <span class="text-sky-400">from</span> <span class="text-amber-400">'vue'</span>

<span class="text-sky-400">export function</span> useMouse() {
  <span class="text-rose-400">const</span> x = ref(0)
  <span class="text-rose-400">const</span> y = ref(0)

  <span class="text-rose-400">function</span> update(event) {
    x.value = event.pageX
    y.value = event.pageY
  }

  onMounted(() => {
    window.addEventListener(<span class="text-amber-400">'mousemove'</span>, update)
  })
  onUnmounted(() => {
    window.removeEventListener(<span class="text-amber-400">'mousemove'</span>, update)
  })

  <span class="text-sky-400">return</span> { x, y }
}</code></pre>
                                </div>
                                 <div class="p-4 border-t border-slate-700 mt-auto">
                                    <h5 class="text-sm font-semibold mb-2 text-slate-300">Usage &amp; State</h5>
                                    <div class="bg-slate-700/80 p-4 rounded-md text-slate-400 text-xs font-mono space-y-1">
                                       <p>&gt; <span class="text-slate-200">const { x, y } = useMouse()</span></p>
                                       <p class="text-slate-500">// Returns reactive mouse coordinates</p>
                                       <p>&gt; <span class="text-slate-200">x.value</span> // <span class="text-sky-400">435</span></p>
                                       <p>&gt; <span class="text-slate-200">y.value</span> // <span class="text-sky-400">102</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- API Endpoints Section -->
        <section id="api" class="content-section fade-in">
            <h2 class="text-3xl font-bold text-slate-100">API & Data Flow</h2>
            <p class="text-lg text-slate-400 mt-2 mb-8">Standardized communication patterns for the frontend, backend, and external services, ensuring a decoupled and scalable architecture.</p>
             <div class="space-y-8">
                    <!-- Component-to-Component -->
                    <div class="glass-panel-darker p-6 rounded-lg">
                        <h4 class="font-bold text-slate-100 mb-2 text-lg">1. Component-to-Component</h4>
                        <p class="text-sm text-slate-400 mb-4">Utilizes Vue's standard `props` for parent-to-child data flow and `emits` for child-to-parent communication. For cross-component state, a global store like <b>Pinia</b> is used.</p>
                        <div class="grid md:grid-cols-2 gap-4 mt-4 font-mono text-xs">
                            <div class="bg-black/50 p-3 rounded-lg">
                                <h5 class="font-sans text-sm font-semibold text-sky-400 mb-2">ParentComponent.vue (Sends Prop, Listens for Event)</h5>
                                <pre><code class="language-html">&lt;<span class="text-rose-400">script</span> setup&gt;
<span class="text-sky-400">import</span> { ref } <span class="text-sky-400">from</span> <span class="text-amber-400">'vue'</span>
<span class="text-sky-400">import</span> ChildComponent <span class="text-sky-400">from</span> <span class="text-amber-400">'./Child.vue'</span>

<span class="text-rose-400">const</span> messageForChild = ref(<span class="text-amber-400">'Hello from Parent!'</span>)
<span class="text-rose-400">function</span> handleChildEvent(payload) {
  alert(<span class="text-amber-400">`Child says: ${payload}`</span>)
}
&lt;/<span class="text-rose-400">script</span>&gt;
&lt;<span class="text-rose-400">template</span>&gt;
  &lt;<span class="text-rose-400">ChildComponent</span> 
    :message="messageForChild"
    @response="handleChildEvent" 
  /&gt;
&lt;/<span class="text-rose-400">template</span>&gt;</code></pre>
                            </div>
                            <div class="bg-black/50 p-3 rounded-lg">
                                 <h5 class="font-sans text-sm font-semibold text-sky-400 mb-2">ChildComponent.vue (Receives Prop, Emits Event)</h5>
                                <pre><code class="language-html">&lt;<span class="text-rose-400">script</span> setup&gt;
defineProps({ message: String })
<span class="text-rose-400">const</span> emit = defineEmits([<span class="text-amber-400">'response'</span>])
&lt;/<span class="text-rose-400">script</span>&gt;
&lt;<span class="text-rose-400">template</span>&gt;
  &lt;<span class="text-rose-400">p</span>&gt;{{ message }}&lt;/<span class="text-rose-400">p</span>&gt;
  &lt;<span class="text-rose-400">button</span> 
    @click="emit(<span class="text-amber-400">'response'</span>, <span class="text-amber-400">'Hi, Parent!'</span>)"
  &gt;
    Send Message to Parent
  &lt;/<span class="text-rose-400">button</span>&gt;
&lt;/<span class="text-rose-400">template</span>&gt;</code></pre>
                            </div>
                        </div>
                    </div>
                    <!-- Frontend-to-Backend -->
                    <div class="glass-panel-darker p-6 rounded-lg">
                        <h4 class="font-bold text-slate-100 mb-2 text-lg">2. Frontend-to-Backend (F2B)</h4>
                        <p class="text-sm text-slate-400 mb-4">The Vue frontend communicates with the Node.js backend via a defined <b>REST or GraphQL API</b>. All requests are authenticated using JWTs sent in the Authorization header.</p>
                         <div class="font-mono text-xs bg-black/50 p-3 rounded-lg mt-4">
                            <h5 class="font-sans text-sm font-semibold text-sky-400 mb-2">Vue Composable for API Call</h5>
                            <pre><code class="language-javascript"><span class="text-sky-400">import</span> { ref, onMounted } <span class="text-sky-400">from</span> <span class="text-amber-400">'vue'</span>

<span class="text-sky-400">export function</span> useUsers() {
  <span class="text-rose-400">const</span> users = ref([])
  <span class="text-rose-400">const</span> token = <span class="text-amber-400">'your_jwt_token_here'</span> <span class="text-slate-500">// From auth store</span>

  <span class="text-rose-400">const</span> fetchUsers = <span class="text-sky-400">async</span> () => {
    <span class="text-rose-400">const</span> response = <span class="text-sky-400">await</span> fetch(<span class="text-amber-400">'https://api.andiegogiap.com/users'</span>, {
      headers: {
        <span class="text-amber-400">'Authorization'</span>: <span class="text-amber-400">`Bearer ${token}`</span>,
        <span class="text-amber-400">'Content-Type'</span>: <span class="text-amber-400">'application/json'</span>
      }
    })
    users.value = <span class="text-sky-400">await</span> response.json()
  }

  onMounted(fetchUsers)
  <span class="text-sky-400">return</span> { users }
}</code></pre>
                        </div>
                    </div>
                    <!-- Backend-to-Services -->
                    <div class="glass-panel-darker p-6 rounded-lg">
                        <h4 class="font-bold text-slate-100 mb-2 text-lg">3. Backend-to-Services (B2S)</h4>
                        <p class="text-sm text-slate-400 mb-4">The Node.js backend interacts with databases (e.g., Postgres) and third-party APIs (e.g., Stripe) through an abstracted <b>service layer</b> to keep business logic clean.</p>
                        <div class="grid md:grid-cols-2 gap-4 mt-4 font-mono text-xs">
                             <div class="bg-black/50 p-3 rounded-lg">
                                <h5 class="font-sans text-sm font-semibold text-sky-400 mb-2">Node/Express Route (Controller)</h5>
                                <pre><code class="language-javascript"><span class="text-sky-400">import</span> express <span class="text-sky-400">from</span> <span class="text-amber-400">'express'</span>
<span class="text-sky-400">import</span> { UserService } <span class="text-sky-400">from</span> <span class="text-amber-400">'../services/user.service'</span>

<span class="text-rose-400">const</span> router = express.Router()

router.get(<span class="text-amber-400">'/users/:id'</span>, <span class="text-sky-400">async</span> (req, res) => {
  <span class="text-sky-400">try</span> {
    <span class="text-rose-400">const</span> user = <span class="text-sky-400">await</span> UserService.findById(req.params.id)
    res.json(user)
  } <span class="text-sky-400">catch</span> (error) {
    res.status(404).json({ message: <span class="text-amber-400">'User not found'</span> })
  }
})</code></pre>
                            </div>
                             <div class="bg-black/50 p-3 rounded-lg">
                                <h5 class="font-sans text-sm font-semibold text-sky-400 mb-2">User Service (Business Logic & DB Interaction)</h5>
                                <pre><code class="language-javascript"><span class="text-sky-400">import</span> { prisma } <span class="text-sky-400">from</span> <span class="text-amber-400">'../lib/prisma'</span>

<span class="text-sky-400">export const</span> UserService = {
  findById: <span class="text-sky-400">async</span> (id) => {
    <span class="text-slate-500">// Logic to find user in the database via Prisma ORM</span>
    <span class="text-rose-400">const</span> user = <span class="text-sky-400">await</span> prisma.user.findUnique({
      where: { id },
    })

    <span class="text-sky-400">if</span> (!user) {
      <span class="text-sky-400">throw new</span> Error(<span class="text-amber-400">'User not found'</span>)
    }

    <span class="text-sky-400">return</span> user
  },
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
        </section>
        
        <!-- CLI & Tooling Section -->
        <section id="tooling" class="content-section fade-in">
            <h2 class="text-3xl font-bold text-slate-100">Developer Tooling & CLI</h2>
            <p class="text-lg text-slate-400 mt-2 mb-8">An interactive simulation to demonstrate how productivity tools streamline development, from component scaffolding to UI library management.</p>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Left: CLI and Controls -->
                <div class="glass-panel-darker p-6 rounded-lg">
                    <h3 class="font-semibold text-lg text-slate-100 mb-2">Add Components via CLI</h3>
                    <p class="text-slate-400 text-sm mb-4">Click a component to simulate running the `shadcn-vue` CLI command to add it to your project.</p>
                    <div id="cli-component-buttons" class="flex flex-wrap gap-3 mb-6">
                        <button data-component="button" class="cli-component-btn bg-slate-800/80 hover:bg-slate-700/80 border border-slate-700 text-slate-300 px-3 py-1 rounded-md text-sm transition-colors">Button</button>
                        <button data-component="card" class="cli-component-btn bg-slate-800/80 hover:bg-slate-700/80 border border-slate-700 text-slate-300 px-3 py-1 rounded-md text-sm transition-colors">Card</button>
                        <button data-component="dialog" class="cli-component-btn bg-slate-800/80 hover:bg-slate-700/80 border border-slate-700 text-slate-300 px-3 py-1 rounded-md text-sm transition-colors">Dialog</button>
                        <button data-component="input" class="cli-component-btn bg-slate-800/80 hover:bg-slate-700/80 border border-slate-700 text-slate-300 px-3 py-1 rounded-md text-sm transition-colors">Input</button>
                    </div>

                    <div id="cli-simulation-terminal" class="bg-black/70 rounded-lg font-mono text-xs text-slate-300 p-4 border border-slate-700 min-h-[200px]">
                        <div class="flex items-center mb-2">
                            <span class="text-green-400 mr-2">$</span>
                            <code id="cli-simulation-command" class="text-white"></code>
                        </div>
                        <div id="cli-simulation-output" class="whitespace-pre-wrap">
                            <span class="text-slate-500">Select a component above to begin...</span>
                        </div>
                    </div>
                </div>

                <!-- Right: File System and Preview -->
                <div class="glass-panel-darker p-6 rounded-lg">
                    <div class="mb-6">
                        <h3 class="font-semibold text-lg text-slate-100 mb-2">Project File Structure</h3>
                        <div id="cli-file-explorer" class="glass-panel border-slate-700 rounded-lg p-4 font-mono text-sm text-slate-400 h-48 overflow-y-auto">
                            <!-- File structure will be rendered here -->
                        </div>
                    </div>
                    <div>
                        <h3 class="font-semibold text-lg text-slate-100 mb-2">Component Preview</h3>
                        <div id="cli-component-preview" class="glass-panel border-slate-700 rounded-lg p-6 min-h-[124px] flex items-center justify-center">
                           <span class="text-slate-500 text-sm">Preview will appear here</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Build Analytics Section -->
        <section id="analytics" class="content-section fade-in">
            <h2 class="text-3xl font-bold text-slate-100">Build & Performance Analytics</h2>
            <p class="text-lg text-slate-400 mt-2 mb-8">A dashboard to monitor build times, bundle sizes, and application performance metrics, helping you maintain a high-quality user experience.</p>
            
            <!-- Key Metrics -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="glass-panel-darker p-5 rounded-lg">
                    <h4 class="text-sm font-medium text-slate-400 mb-1">Latest Build Time</h4>
                    <p id="analytics-build-time" class="text-3xl font-bold text-slate-100"></p>
                </div>
                <div class="glass-panel-darker p-5 rounded-lg">
                    <h4 class="text-sm font-medium text-slate-400 mb-1">Total Bundle Size</h4>
                    <p id="analytics-bundle-size" class="text-3xl font-bold text-slate-100"></p>
                </div>
                <div class="glass-panel-darker p-5 rounded-lg">
                    <h4 class="text-sm font-medium text-slate-400 mb-1">Lighthouse Score</h4>
                    <p id="analytics-lighthouse-score" class="text-3xl font-bold text-green-400"></p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-5 gap-6 mb-8">
                <!-- Main Charts -->
                <div class="lg:col-span-3 space-y-6">
                    <div class="glass-panel-darker p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-slate-100 mb-4">Build Time Over Last 10 Builds</h3>
                        <div class="h-64">
                            <canvas id="buildTimeChart"></canvas>
                        </div>
                    </div>
                    <div class="glass-panel-darker p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-slate-100 mb-4">Bundle Size by Chunk (Latest Build)</h3>
                        <div class="h-64">
                            <canvas id="bundleSizeChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Web Vitals and Build History -->
                <div class="lg:col-span-2 space-y-6">
                    <div class="glass-panel-darker p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-slate-100 mb-4">Core Web Vitals</h3>
                        <div id="analytics-web-vitals" class="space-y-4">
                            <!-- Vitals will be injected here -->
                        </div>
                    </div>
                    <div class="glass-panel-darker p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-slate-100 mb-4">Build History</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left">
                                <thead class="text-xs text-slate-400 uppercase">
                                    <tr>
                                        <th class="py-2 pr-2">Commit</th>
                                        <th class="py-2 pr-2">Status</th>
                                        <th class="py-2">Date</th>
                                    </tr>
                                </thead>
                                <tbody id="analytics-build-history" class="text-slate-300">
                                    <!-- History will be injected here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        
        <!-- Code Playground Section -->
        <section id="playground" class="content-section fade-in">
            <h2 class="text-3xl font-bold text-slate-100">Live Code Playground</h2>
            <p class="text-lg text-slate-400 mt-2 mb-8">Interact directly with Gemini to generate code snippets, get debugging help, or brainstorm UI ideas.</p>
            
            <div class="mb-8">
                 <h3 class="text-xl font-semibold text-slate-100 mb-4">Practical Prompt Starters</h3>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                     <!-- Prompt Card 1 -->
                     <div class="prompt-card glass-panel rounded-lg p-4 hover:bg-slate-700/80 transition-colors cursor-pointer" 
                          data-prompt="As an expert Vue developer, create a single-file component for a product quick-view modal. Provide three separate, clearly labeled code blocks: one for the `<template>`, one for `<style scoped>`, and one for `<script setup>`. The component should take a 'product' object as a prop and manage its own visibility with an `isOpen` ref. Include a button to close the modal and a smooth fade transition.">
                         <h4 class="font-semibold text-sky-400">üõçÔ∏è E-commerce Quick View</h4>
                         <p class="text-sm text-slate-400 mt-1">Generate a modal component to show product details without a page refresh.</p>
                     </div>
                     <!-- Prompt Card 2 -->
                     <div class="prompt-card glass-panel rounded-lg p-4 hover:bg-slate-700/80 transition-colors cursor-pointer"
                          data-prompt="Create a reusable Vue 3 component that acts as a wrapper for Chart.js. It should accept props for chart `type`, `data`, and `options`. Provide three labeled code blocks: `<template>` (containing just the canvas), `<style scoped>`, and `<script setup>`. The script should handle chart creation on mount and destruction on unmount to prevent memory leaks.">
                         <h4 class="font-semibold text-sky-400">üìä Reusable Chart Component</h4>
                         <p class="text-sm text-slate-400 mt-1">Build a wrapper to easily render data visualizations with Chart.js.</p>
                     </div>
                     <!-- Prompt Card 3 -->
                      <div class="prompt-card glass-panel rounded-lg p-4 hover:bg-slate-700/80 transition-colors cursor-pointer"
                           data-prompt="Create a Vue 3 notification 'toast' system. Provide two main parts in labeled code blocks. First, a composable `useNotifications.js` that manages a reactive list of notifications (add, remove). Second, a `NotificationContainer.vue` component that reads from the composable and displays active toasts with enter/leave transitions. Finally, show an example of how to use it in `App.vue`.">
                         <h4 class="font-semibold text-sky-400">üì¢ App Notification System</h4>
                         <p class="text-sm text-slate-400 mt-1">Generate a composable and component for app-wide 'toast' notifications.</p>
                     </div>
                 </div>
            </div>

            <div class="glass-panel-darker rounded-lg overflow-hidden">
                <div class="p-4 border-b border-slate-700 flex justify-between items-center">
                    <h3 class="font-semibold text-lg text-slate-100">Gemini Code Assistant</h3>
                     <div id="simulation-status" class="text-sm text-slate-400">Idle</div>
                </div>
                <div class="p-4">
                    <div class="flex flex-col h-96">
                        <div id="sim-chat-history" class="flex-1 space-y-4 overflow-y-auto pr-2">
                             <div id="api-key-notice" class="hidden p-4 rounded-md bg-amber-900/50 text-amber-300 text-sm">
                                The Code Playground requires a valid API key. Please ensure `process.env.API_KEY` is set.
                            </div>
                            <!-- Chat messages will be added here -->
                        </div>
                        <div class="mt-4 flex items-center border border-slate-600 rounded-lg p-1 bg-slate-800 focus-within:border-sky-500 focus-within:ring-1 focus-within:ring-sky-500 transition">
                            <textarea id="sim-chat-input" rows="1" placeholder="e.g., 'Write a Vue composable for a countdown timer'" class="flex-1 bg-transparent focus:outline-none text-sm text-slate-300 px-2 py-1 resize-none"></textarea>
                            <button id="sim-send-button" class="p-2 text-slate-400 hover:text-white rounded-md hover:bg-slate-700 transition-colors" title="Send Prompt">
                                <span>&#10148;</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- UI Schemas Section -->
        <section id="schemas" class="content-section fade-in">
            <h2 class="text-3xl font-bold text-slate-100">UI & Data Schemas</h2>
            <p class="text-lg text-slate-400 mt-2 mb-8">Define and manage schemas for form validation, API data structures, and dynamic component generation using Zod.</p>
        
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold text-slate-100">Active Schemas</h3>
                <button class="bg-sky-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-sky-500 transition-colors">
                    Create New Schema
                </button>
            </div>
        
            <div class="grid md:grid-cols-2 gap-6">
                <!-- Schema Card 1 -->
                <div class="glass-panel-darker p-6 rounded-lg h-full flex flex-col">
                    <h4 class="font-bold text-sky-400 mb-2">User Registration Form</h4>
                    <p class="text-sm text-slate-400 mb-4 flex-grow">A Zod schema to validate new user sign-ups, ensuring data integrity before sending to the backend.</p>
                    <div class="font-mono text-xs space-y-3 mt-auto">
                        <p class="text-slate-500">// Zod Schema Definition</p>
                        <div class="bg-black/50 p-2 rounded">
                            <pre class="whitespace-pre-wrap"><code>import { z } from 'zod';

export const RegistrationSchema = z.object({
  email: z.string().email(),
  password: z.string().min(8),
});</code></pre>
                        </div>
                    </div>
                </div>
        
                <!-- Schema Card 2 -->
                <div class="glass-panel-darker p-6 rounded-lg h-full flex flex-col">
                    <h4 class="font-bold text-sky-400 mb-2">API Product Response</h4>
                    <p class="text-sm text-slate-400 mb-4 flex-grow">A Zod schema to validate the structure of product data received from a third-party API.</p>
                     <div class="font-mono text-xs space-y-3 mt-auto">
                        <p class="text-slate-500">// Zod Schema for API Data</p>
                        <div class="bg-black/50 p-2 rounded">
                            <pre class="whitespace-pre-wrap"><code>export const ProductAPISchema = z.object({
  id: z.string(),
  product_name: z.string(),
  price_in_cents: z.number(),
  in_stock: z.boolean(),
});</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

         <!-- Starter Kits Section -->
        <section id="starters" class="content-section fade-in">
            <h2 class="text-3xl font-bold text-slate-100">Project Starter Kits</h2>
            <p class="text-lg text-slate-400 mt-2 mb-8">Pre-configured project templates to kickstart development. Click through the steps to see the setup process.</p>
            
            <div class="glass-panel-darker p-6 rounded-lg">
                <div class="mb-4 border-b border-slate-700">
                    <nav id="workflow-tabs" class="flex -mb-px" aria-label="Tabs">
                        <button class="workflow-tab active w-1/2 py-4 px-1 text-center border-b-2 font-medium text-sm text-sky-400 border-sky-500" data-workflow="ecommerce">
                            E-Commerce Frontend
                        </button>
                        <button class="workflow-tab w-1/2 py-4 px-1 text-center border-b-2 font-medium text-sm text-slate-400 border-transparent hover:text-slate-300 hover:border-slate-600" data-workflow="blog">
                            Blog with CMS Backend
                        </button>
                    </nav>
                </div>

                <div id="workflow-content-container">
                    <!-- E-commerce Workflow -->
                    <div id="workflow-ecommerce" class="workflow-content active fade-in">
                        <h3 class="font-semibold text-xl mb-1 text-slate-100">E-Commerce Frontend (Vue + Vite)</h3>
                        <p class="text-slate-400 mb-6">A workflow for scaffolding a new customer-facing storefront application.</p>

                        <div id="workflow-container-ecommerce" class="grid grid-cols-1 md:grid-cols-4 gap-x-8 gap-y-12 relative">
                            <!-- Step 1 -->
                            <div class="workflow-step relative text-center" data-index="0">
                                <div class="step-icon w-10 h-10 rounded-full bg-slate-700 mx-auto flex items-center justify-center font-bold text-slate-300 border-2 border-transparent">1</div>
                                <h4 class="mt-2 font-semibold text-slate-200">Scaffold Project</h4>
                                <p class="text-xs text-slate-500">`npm create vite@latest`</p>
                                <div class="step-connector hidden md:block"></div>
                            </div>
                            <!-- Step 2 -->
                            <div class="workflow-step relative text-center" data-index="1">
                                <div class="step-icon w-10 h-10 rounded-full bg-slate-700 mx-auto flex items-center justify-center font-bold text-slate-300 border-2 border-transparent">2</div>
                                <h4 class="mt-2 font-semibold text-slate-200">Add UI Library</h4>
                                <p class="text-xs text-slate-500">`npx shadcn-vue@latest init`</p>
                                <div class="step-connector hidden md:block"></div>
                            </div>
                            <!-- Step 3 -->
                            <div class="workflow-step relative text-center" data-index="2">
                                <div class="step-icon w-10 h-10 rounded-full bg-slate-700 mx-auto flex items-center justify-center font-bold text-slate-300 border-2 border-transparent">3</div>
                                <h4 class="mt-2 font-semibold text-slate-200">Setup Routing</h4>
                                <p class="text-xs text-slate-500">`npm install vue-router`</p>
                                 <div class="step-connector hidden md:block"></div>
                            </div>
                            <!-- Step 4 -->
                            <div class="workflow-step relative text-center" data-index="3">
                                <div class="step-icon w-10 h-10 rounded-full bg-slate-700 mx-auto flex items-center justify-center font-bold text-slate-300 border-2 border-transparent">4</div>
                                <h4 class="mt-2 font-semibold text-slate-200">Connect State</h4>
                                <p class="text-xs text-slate-500">`npm install pinia`</p>
                            </div>
                        </div>
                    </div>

                    <!-- Blog Workflow -->
                    <div id="workflow-blog" class="workflow-content hidden fade-in">
                        <h3 class="font-semibold text-xl mb-1 text-slate-100">Blog with CMS Backend (Node.js)</h3>
                        <p class="text-slate-400 mb-6">A scheduled workflow that automatically generates technical specifications from a project brief.</p>

                        <div id="workflow-container-blog" class="grid grid-cols-1 md:grid-cols-4 gap-x-8 gap-y-12 relative">
                            <!-- Step 1 -->
                            <div class="workflow-step relative text-center" data-index="0">
                                <div class="step-icon w-10 h-10 rounded-full bg-slate-700 mx-auto flex items-center justify-center font-bold text-slate-300 border-2 border-transparent">1</div>
                                <h4 class="mt-2 font-semibold text-slate-200">Init Node Server</h4>
                                <p class="text-xs text-slate-500">`npm init -y` & `install express`</p>
                                <div class="step-connector hidden md:block"></div>
                            </div>
                            <!-- Step 2 -->
                            <div class="workflow-step relative text-center" data-index="1">
                                <div class="step-icon w-10 h-10 rounded-full bg-slate-700 mx-auto flex items-center justify-center font-bold text-slate-300 border-2 border-transparent">2</div>
                                <h4 class="mt-2 font-semibold text-slate-200">Define DB Schema</h4>
                                <p class="text-xs text-slate-500">`npx prisma init`</p>
                                <div class="step-connector hidden md:block"></div>
                            </div>
                            <!-- Step 3 -->
                            <div class="workflow-step relative text-center" data-index="2">
                                <div class="step-icon w-10 h-10 rounded-full bg-slate-700 mx-auto flex items-center justify-center font-bold text-slate-300 border-2 border-transparent">3</div>
                                <h4 class="mt-2 font-semibold text-slate-200">Create API Endpoints</h4>
                                <p class="text-xs text-slate-500">`router.post('/posts', ...)`</p>
                                 <div class="step-connector hidden md:block"></div>
                            </div>
                            <!-- Step 4 -->
                            <div class="workflow-step relative text-center" data-index="3">
                                <div class="step-icon w-10 h-10 rounded-full bg-slate-700 mx-auto flex items-center justify-center font-bold text-slate-300 border-2 border-transparent">4</div>
                                <h4 class="mt-2 font-semibold text-slate-200">Deploy Serverless</h4>
                                <p class="text-xs text-slate-500">`gcloud run deploy`</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 p-4 glass-panel rounded-lg">
                    <h4 class="font-semibold text-slate-200 mb-3">Simulation Output</h4>
                    <div id="workflow-simulation-terminal" class="bg-black/70 rounded-lg font-mono text-xs text-slate-300 p-4 border border-slate-700 min-h-[250px] overflow-y-auto flex flex-col">
                        <div class="flex items-center mb-2">
                            <span class="text-green-400 mr-2">$</span>
                            <code id="simulation-command" class="text-white"></code>
                        </div>
                        <div id="simulation-output" class="whitespace-pre-wrap flex-grow"></div>
                        <div id="simulation-explanation" class="mt-4 text-slate-400 border-t border-slate-700 pt-3"></div>
                    </div>
                </div>

                 <div class="mt-6 text-center">
                    <button id="workflow-prev" class="bg-slate-700 text-slate-300 px-4 py-2 rounded-lg text-sm font-semibold hover:bg-slate-600 transition-colors disabled:opacity-50" disabled>&lt; Previous</button>
                    <button id="workflow-next" class="bg-sky-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-sky-500 transition-colors">Next Step &gt;</button>
                </div>
            </div>
        </section>
        
        <!-- CI/CD Webhooks Section -->
        <section id="webhooks" class="content-section fade-in">
            <h2 class="text-3xl font-bold text-slate-100">CI/CD Webhooks & Automation</h2>
            <p class="text-lg text-slate-400 mt-2 mb-8">Generate webhook URLs to trigger automated builds, tests, and deployments from your Git provider (e.g., GitHub, GitLab).</p>

            <div class="glass-panel-darker p-6 rounded-lg mb-8">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold text-slate-100">Your Webhook URLs</h3>
                    <button id="generate-url-button" class="bg-sky-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-sky-500 transition-colors">Generate New URL</button>
                </div>
                <div id="webhook-url-list" class="space-y-3">
                    <p class="text-slate-500 text-sm">You haven't generated any webhook URLs yet.</p>
                </div>
            </div>

            <div class="glass-panel-darker p-6 rounded-lg">
                <h3 class="text-xl font-semibold text-slate-100 mb-4">Using Webhooks</h3>
                <p class="text-slate-400 mb-6">Paste the generated URL into your Git provider's webhook configuration page. The system will listen for events like `git push` to the `main` branch to trigger a new deployment.</p>
                
                <div>
                    <h4 class="font-semibold text-lg text-slate-200 mb-2">Example: GitHub `push` event payload</h4>
                    <p class="text-sm text-slate-400 mb-3">This is a simplified example of the JSON payload sent by GitHub when code is pushed to a repository.</p>
                    <div class="bg-black/50 text-white p-4 rounded-lg font-mono text-sm">
                        <pre><code><span class="text-green-400">POST /webhooks/&lt;your-generated-url&gt;</span>
<span class="text-sky-400">X-GitHub-Event:</span> push
<span class="text-sky-400">Content-Type:</span> application/json

{
  <span class="text-rose-400">"ref"</span>: <span class="text-amber-400">"refs/heads/main"</span>,
  <span class="text-rose-400">"repository"</span>: {
    <span class="text-rose-400">"full_name"</span>: <span class="text-amber-400">"my-org/my-app"</span>
  },
  <span class="text-rose-400">"head_commit"</span>: {
    <span class="text-rose-400">"id"</span>: <span class="text-amber-400">"a1b2c3d4..."</span>,
    <span class="text-rose-400">"message"</span>: <span class="text-amber-400">"feat: add new component"</span>
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Deployment Targets Section -->
        <section id="deployment" class="content-section fade-in">
            <h2 class="text-3xl font-bold text-slate-100">Deployment Targets</h2>
            <p class="text-lg text-slate-400 mt-2 mb-8">The platform is built on containerized and serverless principles, enabling seamless deployment to various modern cloud hosting providers.</p>
             <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="glass-panel-darker p-5 rounded-lg">
                    <h4 class="font-bold text-slate-100 mb-2">Vercel / Netlify</h4>
                    <p class="text-sm text-slate-400">Ideal for frontend deployment. These platforms offer zero-config, git-based workflows, automatic scaling, and a global CDN for optimal performance.</p>
                </div>
                <div class="glass-panel-darker p-5 rounded-lg">
                    <h4 class="font-bold text-slate-100 mb-2">Google Cloud Run</h4>
                    <p class="text-sm text-slate-400">A perfect target for containerized Node.js backends. A fully-managed, serverless platform that automatically scales instances up or down to zero.</p>
                </div>
                <div class="glass-panel-darker p-5 rounded-lg">
                    <h4 class="font-bold text-slate-100 mb-2">Fly.io / Render</h4>
                    <p class="text-sm text-slate-400">Excellent for deploying full-stack applications and databases. These platforms simplify cloud infrastructure by deploying containers and services close to your users.</p>
                </div>
            </div>
            <div class="mt-8 glass-panel-darker p-6 rounded-lg">
                <h4 class="font-bold text-slate-100 mb-2">Architectural Patterns for Scale</h4>
                <p class="text-slate-400 mb-4">To maintain performance as usage grows, the platform is built with critical scaling patterns:</p>
                <ul class="list-disc list-inside space-y-2 text-slate-400">
                    <li><b>Stateless Backend Services:</b> The Node.js backend is stateless, with user session data externalized to a cache like Redis, enabling effective horizontal scaling.</li>
                    <li><b>Edge Functions:</b> Critical, low-latency API routes can be deployed to the edge (e.g., Cloudflare Workers, Vercel Edge Functions) to reduce response times for users globally.</li>
                </ul>
            </div>
        </section>

    </div>
</main>
</div>

<!-- Webhook URL Modal -->
<div id="webhook-url-modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center z-50">
    <div class="bg-slate-800 p-6 rounded-lg shadow-xl border border-slate-700 w-full max-w-md">
        <h3 class="text-lg font-semibold text-slate-100">New Webhook URL Generated</h3>
        <p class="text-sm text-slate-400 mt-2 mb-4">Please copy this URL and store it securely. You will not be able to see the full URL again.</p>
        <div class="bg-slate-900 p-3 rounded-md flex items-center justify-between">
            <code id="new-webhook-url-display" class="text-amber-400 font-mono text-xs"></code>
            <button id="modal-copy-url-button" title="Copy to clipboard" class="p-1 text-slate-400 hover:text-white">
                 <span class="text-lg">üìã</span>
            </button>
        </div>
        <button id="close-modal-button" class="mt-6 w-full bg-sky-600 text-white py-2 rounded-lg text-sm font-semibold hover:bg-sky-500">Done</button>
    </div>
</div>

<!-- Page Deployment Modal -->
<div id="deployment-modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4">
    <div class="bg-slate-800 p-6 rounded-lg shadow-xl border border-slate-700 w-full max-w-lg">
        <div id="deployment-form-view">
            <h3 class="text-lg font-semibold text-slate-100">Deploy Page</h3>
            <p class="text-sm text-slate-400 mt-2 mb-4">Provide details to publish your generated HTML as a static page.</p>
            <div class="space-y-4">
                <div>
                    <label for="deployment-slug" class="block text-sm font-medium text-slate-300 mb-1">Page Slug</label>
                    <input type="text" id="deployment-slug" class="w-full bg-slate-900 border border-slate-600 rounded-md p-2 text-sm text-slate-300 focus:ring-sky-500 focus:border-sky-500" placeholder="e.g., my-awesome-agent">
                    <p class="text-xs text-slate-500 mt-1">kebab-case only. Becomes '.../your-slug.html'.</p>
                </div>
                <div>
                    <label for="deployment-title" class="block text-sm font-medium text-slate-300 mb-1">Page Title</label>
                    <input type="text" id="deployment-title" class="w-full bg-slate-900 border border-slate-600 rounded-md p-2 text-sm text-slate-300 focus:ring-sky-500 focus:border-sky-500" placeholder="e.g., My Awesome Agent">
                </div>
            </div>
            <div class="mt-6 flex justify-end gap-3">
                <button id="deployment-cancel-button" class="bg-slate-700 text-slate-300 px-4 py-2 rounded-lg text-sm font-semibold hover:bg-slate-600">Cancel</button>
                <button id="deployment-deploy-button" class="bg-sky-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-sky-500 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
                    <span>Deploy</span>
                    <span id="deployment-spinner" class="hidden w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
                </button>
            </div>
        </div>
        <div id="deployment-result-view" class="hidden">
             <!-- Result will be shown here -->
        </div>
    </div>
</div>

<!-- Custom Instructions Panel -->
<div id="instructions-backdrop" class="fixed inset-0 bg-black/60 z-[99] hidden"></div>
<div id="custom-instructions-panel" class="fixed top-0 right-0 h-full w-full max-w-md bg-slate-900/80 backdrop-blur-md border-l border-slate-700 p-6 flex flex-col transform-gpu translate-x-full z-[100] shadow-2xl">
    <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-bold text-slate-100">Custom Instructions</h3>
        <button id="close-instructions-button" class="p-2 text-slate-400 hover:text-white rounded-full hover:bg-slate-700">
             <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
    </div>
    <div class="space-y-6 overflow-y-auto flex-grow pr-2">
        <div>
            <label for="system-orchestrator-input" class="block text-sm font-medium text-slate-300 mb-2">System Orchestrator</label>
            <p class="text-xs text-slate-500 mb-2">High-level instructions for the model's role and constraints (maps to `systemInstruction`).</p>
            <textarea id="system-orchestrator-input" rows="8" class="w-full bg-slate-800 border border-slate-600 rounded-md p-2 text-sm text-slate-300 focus:ring-sky-500 focus:border-sky-500"></textarea>
        </div>
        <div>
            <label for="ai-supervisor-input" class="block text-sm font-medium text-slate-300 mb-2">AI Supervisor</label>
            <p class="text-xs text-slate-500 mb-2">Guides the AI's persona, response style, and pre-processes the user's prompt.</p>
            <textarea id="ai-supervisor-input" rows="8" class="w-full bg-slate-800 border border-slate-600 rounded-md p-2 text-sm text-slate-300 focus:ring-sky-500 focus:border-sky-500"></textarea>
        </div>
    </div>
    <div class="mt-6 flex-shrink-0">
         <button id="save-instructions-button" class="w-full bg-sky-600 text-white py-2 rounded-lg text-sm font-semibold hover:bg-sky-500">Save & Close</button>
    </div>
</div>


<script type="module">
    import { GoogleGenAI } from '@google/genai';

    document.addEventListener('DOMContentLoaded', () => {
        const appState = {
            currentView: 'dashboard',
            workflowStep: 0,
            webhookUrls: [],
            simulationRunning: false,
            currentWorkflow: 'ecommerce',
            systemInstruction: '',
            aiSupervisorInstruction: '',
            workflowAnimationTimeout: null,
            cliAnimationTimeout: null,
            cliAddedComponents: new Set(),
            htmlToDeploy: null,
        };

        const navLinks = document.querySelectorAll('#main-nav a');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const sidebar = document.getElementById('sidebar');
        const contentContainer = document.getElementById('content-container');
        
        function copyToClipboard(text, button) {
            navigator.clipboard.writeText(text).then(() => {
                const originalContent = button.innerHTML;
                button.innerHTML = `<span>&#10003; Copied!</span>`;
                setTimeout(() => {
                    button.innerHTML = originalContent;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
                const originalContent = button.innerHTML;
                button.innerHTML = `<span>Failed!</span>`;
                 setTimeout(() => {
                    button.innerHTML = originalContent;
                }, 2000);
            });
        }

        function navigateTo(hash) {
            if (!hash || hash === '#') {
                hash = '#dashboard'; // Default to dashboard if hash is empty or just '#'
            }
            const targetId = hash.substring(1);
            const targetSection = document.getElementById(targetId);

            // Do not proceed if it's the main app container itself
            if (targetId === 'app' || !targetSection) {
                // If section not found, go to dashboard, but don't scroll if it was an invalid hash
                if (targetId !== 'app') {
                   navigateTo('#dashboard');
                }
                return;
            }
            
            // Special handling for analytics on first load
            if (targetId === 'analytics' && !appState.analyticsInitialized) {
                 initAnalytics();
                 appState.analyticsInitialized = true;
            }


            contentContainer.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            targetSection.classList.add('active');

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.hash === hash) {
                    link.classList.add('active');
                }
            });

            appState.currentView = targetId;
            window.location.hash = hash;
            
            if (window.innerWidth < 768) {
                sidebar.classList.add('hidden');
                sidebar.classList.remove('flex', 'absolute', 'w-full', 'h-full', 'z-40');
            }
        }

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                navigateTo(e.currentTarget.hash);
            });
        });

        mobileMenuButton.addEventListener('click', () => {
            sidebar.classList.toggle('hidden');
            sidebar.classList.toggle('flex');
            sidebar.classList.toggle('absolute');
            sidebar.classList.toggle('w-full');
            sidebar.classList.toggle('h-full');
            sidebar.classList.toggle('z-40');
        });
        
        const initialHash = window.location.hash || '#dashboard';
        navigateTo(initialHash);
        // If there's no hash on load, we don't scroll, we just show the hero.
        if (window.location.hash) {
            const element = document.querySelector(window.location.hash);
            if(element) element.scrollIntoView();
        }


        const diagram = document.getElementById('architecture-diagram');
        const tooltip = document.getElementById('arch-tooltip');
        if (diagram && tooltip) {
            diagram.addEventListener('mouseover', (e) => {
                const component = e.target.closest('.arch-component');
                if (component) {
                    tooltip.innerHTML = `<b>${component.dataset.title}</b><br>${component.dataset.description}`;
                    tooltip.classList.remove('hidden');
                }
            });
            diagram.addEventListener('mousemove', (e) => {
                 tooltip.style.left = e.pageX + 15 + 'px';
                 tooltip.style.top = e.pageY + 15 + 'px';
            });
            diagram.addEventListener('mouseout', (e) => {
                const component = e.target.closest('.arch-component');
                if (component) {
                    tooltip.classList.add('hidden');
                }
            });
        }

        const agentTabs = document.querySelectorAll('.agent-tab');
        const agentContents = document.querySelectorAll('.agent-content');
        agentTabs.forEach((tab, index) => {
            tab.addEventListener('click', () => {
                agentTabs.forEach(t => {
                    t.classList.remove('active', 'text-sky-400', 'border-sky-500');
                    t.classList.add('text-slate-400', 'border-transparent', 'hover:text-slate-300', 'hover:border-slate-600');
                });
                tab.classList.add('active', 'text-sky-400', 'border-sky-500');
                tab.classList.remove('text-slate-400', 'border-transparent', 'hover:text-slate-300', 'hover:border-slate-600');

                agentContents.forEach(content => {
                    content.classList.remove('active', 'fade-in');
                    if (!content.classList.contains('hidden')) {
                        content.classList.add('hidden');
                    }
                });
                agentContents[index].classList.add('active', 'fade-in');
                agentContents[index].classList.remove('hidden');
            });
        });

        // --- Custom Instructions Panel Logic ---
        const toggleInstructionsButton = document.getElementById('toggle-instructions-button');
        const customInstructionsPanel = document.getElementById('custom-instructions-panel');
        const closeInstructionsButton = document.getElementById('close-instructions-button');
        const systemOrchestratorInput = document.getElementById('system-orchestrator-input');
        const aiSupervisorInput = document.getElementById('ai-supervisor-input');
        const saveInstructionsButton = document.getElementById('save-instructions-button');
        const instructionsBackdrop = document.getElementById('instructions-backdrop');

        const defaultSystemInstruction = `You are an elite senior frontend engineer and UI/UX design expert. Your primary focus is on providing clean, readable, well-organized, and performant code for modern web applications using Vue, Vite, Node.js, and Tailwind CSS. Always prioritize best practices, including offline functionality, responsiveness, and accessibility (ARIA attributes). When generating code, provide it in a complete, ready-to-use format within markdown code blocks. Explain your reasoning concisely. When asked to provide multiple code blocks (e.g., for HTML, CSS, JS), clearly label each block.`;
        systemOrchestratorInput.value = defaultSystemInstruction;
        appState.systemInstruction = defaultSystemInstruction;

        function toggleInstructionsPanel(visible) {
            if (visible) {
                customInstructionsPanel.classList.remove('translate-x-full');
                instructionsBackdrop.classList.remove('hidden');
            } else {
                customInstructionsPanel.classList.add('translate-x-full');
                instructionsBackdrop.classList.add('hidden');
            }
        }

        toggleInstructionsButton.addEventListener('click', () => toggleInstructionsPanel(true));
        closeInstructionsButton.addEventListener('click', () => toggleInstructionsPanel(false));
        instructionsBackdrop.addEventListener('click', () => toggleInstructionsPanel(false));
        saveInstructionsButton.addEventListener('click', () => {
            appState.systemInstruction = systemOrchestratorInput.value;
            appState.aiSupervisorInstruction = aiSupervisorInput.value;
            toggleInstructionsPanel(false);
        });

        // --- Live Playground Logic ---
        const simChatInput = document.getElementById('sim-chat-input');
        const simSendButton = document.getElementById('sim-send-button');
        const chatHistory = document.getElementById('sim-chat-history');
        const simulationStatus = document.getElementById('simulation-status');
        const apiKeyNotice = document.getElementById('api-key-notice');
        const promptCards = document.querySelectorAll('.prompt-card');
        
        const hasApiKey = process.env.API_KEY && process.env.API_KEY.length > 5;
        if (!hasApiKey) {
            apiKeyNotice.classList.remove('hidden');
            simChatInput.disabled = true;
            simSendButton.disabled = true;
        }

        function autoResizeTextarea() {
            simChatInput.style.height = 'auto';
            simChatInput.style.height = (simChatInput.scrollHeight) + 'px';
        }
        
        if (simChatInput) {
            simChatInput.addEventListener('input', autoResizeTextarea);
        }

        promptCards.forEach(card => {
            card.addEventListener('click', () => {
                const promptText = card.dataset.prompt;
                simChatInput.value = promptText;
                autoResizeTextarea();
                simChatInput.focus();
                simChatInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });
        });

        function parseGeminiResponse(text) {
            const escape = (str) => str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&#039;');
            
            const parts = text.split(/(```[\w\s]*\n[\s\S]+?```)/g);
            
            return parts.map(part => {
                if (part.startsWith('```')) {
                    const match = part.match(/```([\w\s]*)\n([\s\S]+?)```/);
                    if (match) {
                        const lang = match[1].trim().toLowerCase() || 'plaintext';
                        const code = match[2];
                        const isHtml = lang === 'html';
                        
                        const deployButtonHtml = isHtml ? 
                            `<button class="deploy-btn bg-slate-600 hover:bg-sky-600 text-xs px-2 py-1 rounded text-white transition-colors" title="Deploy this page">
                                <span class="mr-1">üöÄ</span>Deploy
                            </button>` : '';

                        const headerHtml = `
                            <div class="bg-black/70 text-slate-400 text-xs p-2 flex justify-between items-center rounded-t-md">
                                <span>${lang}</span>
                                <div class="flex gap-2">
                                    ${deployButtonHtml}
                                    <button class="copy-code-btn bg-slate-600 hover:bg-slate-500 text-xs px-2 py-1 rounded text-white transition-colors" title="Copy code">
                                        üìã Copy
                                    </button>
                                </div>
                            </div>
                        `;
                        
                        return `<div class="code-block-wrapper my-4">` +
                                headerHtml +
                               `<pre class="bg-black/50 p-4 rounded-b-md overflow-x-auto font-mono text-sm text-white neon-blue-outline">` +
                               `<code class="language-${lang}">${escape(code)}</code>` +
                               `</pre></div>`;
                    }
                    return ''; 
                } else {
                    return part
                        .trim()
                        .replace(/^### (.*$)/gim, `<h3 class="font-semibold text-lg text-sky-300 mt-4 mb-2">$1</h3>`)
                        .replace(/^> (.*$)/gim, `<blockquote class="border-l-4 border-slate-600 pl-4 my-2 text-slate-400 italic">$1</blockquote>`)
                        .replace(/\n/g, '<br>');
                }
            }).join('');
        }

        function addChatMessageToUI(role, text) {
            const wrapper = document.createElement('div');
            wrapper.className = `fade-in flex flex-col ${role === 'user' ? 'items-end' : 'items-start'}`;
            
            const bubble = document.createElement('div');

            if (role === 'user') {
                bubble.className = `p-3 rounded-lg max-w-xl text-sm bg-sky-700 text-sky-100`;
                bubble.textContent = text;
            } else {
                bubble.className = `p-3 rounded-lg max-w-xl text-sm bg-slate-700/80 text-slate-200 w-full`;
                bubble.innerHTML = parseGeminiResponse(text);
            }

            const icon = document.createElement('span');
            icon.className = 'text-xl mr-2 ml-2';
            icon.textContent = role === 'user' ? 'üë§' : 'ü§ñ';

            const messageContainer = document.createElement('div');
            messageContainer.className = 'flex items-start w-full';
            
            if (role === 'user') {
                messageContainer.append(bubble, icon);
            } else {
                messageContainer.append(icon, bubble);
            }

            wrapper.appendChild(messageContainer);
            chatHistory.appendChild(wrapper);
            chatHistory.scrollTop = chatHistory.scrollHeight;
        }

        async function runLiveInteraction(promptText) {
            if (appState.simulationRunning || !hasApiKey) return;

            appState.simulationRunning = true;
            simSendButton.disabled = true;
            simChatInput.disabled = true;
            simulationStatus.textContent = 'Awaiting response...';
            simulationStatus.classList.add('text-amber-400');

            addChatMessageToUI('user', promptText);

            try {
                const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                
                const systemInstruction = appState.systemInstruction.trim();
                const supervisorInstruction = appState.aiSupervisorInstruction.trim();
                
                let finalUserContent = promptText;
                if (supervisorInstruction) {
                    finalUserContent = `${supervisorInstruction}\n\n---\n\n${promptText}`;
                }

                const config = {
                    maxOutputTokens: 4096,
                    thinkingConfig: { thinkingBudget: 512 } 
                };
                
                if (systemInstruction) {
                    config.systemInstruction = systemInstruction;
                }

                const requestPayload = {
                    model: 'gemini-2.5-flash',
                    contents: finalUserContent,
                    config: config,
                };
                
                const response = await ai.models.generateContent(requestPayload);
                
                addChatMessageToUI('model', response.text);

            } catch (error) {
                console.error("Gemini API Error:", error);
                let errorMessage = 'An error occurred while communicating with the AI.';
                if (error.message) {
                    errorMessage += ` Details: ${error.message}`;
                }
                addChatMessageToUI('model', `**Error:** ${errorMessage}`);
            } finally {
                appState.simulationRunning = false;
                simSendButton.disabled = false;
                simChatInput.disabled = false;
                simulationStatus.textContent = 'Idle';
                simulationStatus.classList.remove('text-amber-400');
            }
        }

        if (simSendButton && simChatInput) {
            const triggerSim = () => {
                const prompt = simChatInput.value.trim();
                if (prompt && !appState.simulationRunning) {
                    runLiveInteraction(prompt);
                    simChatInput.value = '';
                    autoResizeTextarea();
                }
            };
            simSendButton.addEventListener('click', triggerSim);
            simChatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    triggerSim();
                }
            });
        }
        
        chatHistory.addEventListener('click', (e) => {
            const copyBtn = e.target.closest('.copy-code-btn');
            if (copyBtn) {
                const code = copyBtn.closest('.code-block-wrapper').querySelector('code').innerText;
                copyToClipboard(code, copyBtn);
                return;
            }

            const deployBtn = e.target.closest('.deploy-btn');
            if (deployBtn) {
                const code = deployBtn.closest('.code-block-wrapper').querySelector('code').innerText;
                appState.htmlToDeploy = code;
                openDeploymentModal();
                return;
            }
        });

        // --- Page Deployment Logic ---
        const deploymentModal = document.getElementById('deployment-modal');
        const deploymentFormView = document.getElementById('deployment-form-view');
        const deploymentResultView = document.getElementById('deployment-result-view');
        const slugInput = document.getElementById('deployment-slug');
        const titleInput = document.getElementById('deployment-title');
        const deployButton = document.getElementById('deployment-deploy-button');
        const cancelButton = document.getElementById('deployment-cancel-button');
        const deploymentSpinner = document.getElementById('deployment-spinner');

        function openDeploymentModal() {
            deploymentModal.classList.remove('hidden');
            deploymentFormView.classList.remove('hidden');
            deploymentResultView.classList.add('hidden');
            deploymentResultView.innerHTML = '';
            slugInput.value = '';
            titleInput.value = '';
            slugInput.focus();
        }

        function closeDeploymentModal() {
            deploymentModal.classList.add('hidden');
            appState.htmlToDeploy = null;
        }

        function slugify(text) {
            return text.toString().toLowerCase()
                .replace(/\s+/g, '-')
                .replace(/[^\w-]+/g, '')
                .replace(/--+/g, '-')
                .replace(/^-+/, '')
                .replace(/-+$/, '');
        }

        if(slugInput) {
            slugInput.addEventListener('input', () => {
                slugInput.value = slugify(slugInput.value);
            });
        }

        if(cancelButton) cancelButton.addEventListener('click', closeDeploymentModal);
        if(deploymentModal) {
             deploymentModal.addEventListener('click', (e) => {
                if (e.target === deploymentModal) {
                    closeDeploymentModal();
                }
            });
        }

        async function deployPage() {
            const slug = slugInput.value.trim();
            const title = titleInput.value.trim();
            let html = appState.htmlToDeploy;

            if (!slug || !title || !html) {
                alert('Slug, Title, and HTML content are required.');
                return;
            }

            if (!html.toLowerCase().includes('<!doctype html>')) {
                html = `<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${title}</title>
  <script src="https://cdn.tailwindcss.com"><\/script>
</head>
<body class="bg-slate-100 font-sans p-8">
  ${html}
</body>
</html>`;
            }

            deployButton.disabled = true;
            deploymentSpinner.classList.remove('hidden');

            try {
                const response = await fetch('/orch/v1/gemini/pages', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ slug, title, html })
                });

                const result = await response.json();

                if (!response.ok) {
                    throw new Error(result.error || `HTTP ${response.status}`);
                }
                
                deploymentFormView.classList.add('hidden');
                deploymentResultView.classList.remove('hidden');
                deploymentResultView.innerHTML = `
                    <h3 class="text-lg font-semibold text-green-400">üöÄ Deployment Successful!</h3>
                    <p class="text-sm text-slate-400 mt-2 mb-4">Your page is now live. You can view it at the public URL below.</p>
                    <div class="bg-slate-900 p-3 rounded-md flex items-center justify-between">
                        <a href="${result.public_url}" target="_blank" rel="noopener noreferrer" class="text-amber-400 font-mono text-xs truncate pr-4 hover:underline">${result.public_url}</a>
                        <button class="url-copy-btn p-1 text-slate-400 hover:text-white" title="Copy URL">
                            <span class="text-lg">üìã</span>
                        </button>
                    </div>
                    <button class="mt-6 w-full bg-slate-600 text-white py-2 rounded-lg text-sm font-semibold hover:bg-slate-500 close-deploy-modal-btn">Done</button>
                `;
            } catch (error) {
                deploymentFormView.classList.add('hidden');
                deploymentResultView.classList.remove('hidden');
                deploymentResultView.innerHTML = `
                    <h3 class="text-lg font-semibold text-red-400">Deployment Failed</h3>
                    <p class="text-sm text-slate-400 mt-2 mb-4">An error occurred during deployment.</p>
                    <div class="bg-red-900/30 p-3 rounded-md font-mono text-xs text-red-300">
                        ${error.message}
                    </div>
                    <div class="mt-6 flex justify-end gap-3">
                        <button class="bg-sky-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-sky-500 try-again-btn">Try Again</button>
                        <button class="bg-slate-700 text-slate-300 px-4 py-2 rounded-lg text-sm font-semibold hover:bg-slate-600 close-deploy-modal-btn">Cancel</button>
                    </div>
                `;
            } finally {
                deployButton.disabled = false;
                deploymentSpinner.classList.add('hidden');
            }
        }
        
        deploymentResultView.addEventListener('click', e => {
            if (e.target.closest('.url-copy-btn')) {
                const url = e.target.closest('.url-copy-btn').previousElementSibling.href;
                copyToClipboard(url, e.target.closest('.url-copy-btn'));
            }
            if(e.target.closest('.close-deploy-modal-btn')) {
                closeDeploymentModal();
            }
            if(e.target.closest('.try-again-btn')) {
                deploymentFormView.classList.remove('hidden');
                deploymentResultView.classList.add('hidden');
            }
        });

        if(deployButton) deployButton.addEventListener('click', deployPage);

        // --- CLI & Tooling Logic ---
        const cliComponentButtons = document.querySelectorAll('.cli-component-btn');
        const cliCommandEl = document.getElementById('cli-simulation-command');
        const cliOutputEl = document.getElementById('cli-simulation-output');
        const cliFileExplorerEl = document.getElementById('cli-file-explorer');
        const cliPreviewEl = document.getElementById('cli-component-preview');

        const cliComponentData = {
            button: {
                command: "npx shadcn-vue@latest add button",
                output: `<span class="text-green-400">‚úî</span> Done.\n\n<span class="text-slate-500">Your new component is available at:</span>\n<span class="text-slate-500">src/components/ui/button/Button.vue</span>`,
                files: ["button/Button.vue"],
                preview: `<button class="bg-sky-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-sky-500 transition-colors">Click Me</button>`
            },
            card: {
                command: "npx shadcn-vue@latest add card",
                output: `<span class="text-green-400">‚úî</span> Done.\n\n<span class="text-slate-500">Your new components are available at:</span>\n<span class="text-slate-500">src/components/ui/card/Card.vue</span>\n<span class="text-slate-500">src/components/ui/card/CardHeader.vue</span>\n<span class="text-slate-500">... and 3 others</span>`,
                files: ["card/Card.vue", "card/CardHeader.vue", "card/CardContent.vue", "card/CardFooter.vue", "card/CardTitle.vue"],
                preview: `<div class="w-48 bg-slate-800/80 border border-slate-700 rounded-lg p-4 text-left"><div class="font-bold text-slate-200 text-sm mb-1">Card Title</div><p class="text-xs text-slate-400">This is the card content.</p></div>`
            },
            dialog: {
                command: "npx shadcn-vue@latest add dialog",
                output: `<span class="text-green-400">‚úî</span> Done.\n\n<span class="text-slate-500">Your new components are available at:</span>\n<span class="text-slate-500">src/components/ui/dialog/Dialog.vue</span>\n<span class="text-slate-500">... and 4 others</span>`,
                files: ["dialog/Dialog.vue", "dialog/DialogTrigger.vue", "dialog/DialogContent.vue", "dialog/DialogHeader.vue", "dialog/DialogFooter.vue"],
                preview: `<div class="bg-sky-600 text-white px-4 py-2 rounded-lg text-sm font-semibold">Open Dialog</div>`
            },
            input: {
                command: "npx shadcn-vue@latest add input",
                output: `<span class="text-green-400">‚úî</span> Done.\n\n<span class="text-slate-500">Your new component is available at:</span>\n<span class="text-slate-500">src/components/ui/input/Input.vue</span>`,
                files: ["input/Input.vue"],
                preview: `<input type="text" placeholder="Enter text..." class="w-48 bg-slate-800/80 border border-slate-600 rounded-md p-2 text-sm text-slate-300 focus:ring-sky-500 focus:border-sky-500">`
            }
        };

        function simpleTypeWriter(element, text, onComplete) {
            clearTimeout(appState.cliAnimationTimeout);
            element.innerHTML = '';
            
            const lines = text.split('\n');
            let i = 0;
            
            function type() {
                if (i < lines.length) {
                    element.innerHTML += lines[i] + '\n';
                    i++;
                    appState.cliAnimationTimeout = setTimeout(type, 80);
                } else {
                    if (onComplete) onComplete();
                }
            }
            type();
        }

        function renderFileExplorer() {
            const base = `<div>src/</div><div class="pl-4">components/</div><div class="pl-8">ui/</div>`;
            const filesHtml = Array.from(appState.cliAddedComponents).sort().map(file => 
                `<div class="pl-12 text-sky-400">‚îî‚îÄ ${file}</div>`
            ).join('');
            cliFileExplorerEl.innerHTML = base + filesHtml;
        }
        
        cliComponentButtons.forEach(button => {
            button.addEventListener('click', () => {
                const componentId = button.dataset.component;
                const data = cliComponentData[componentId];
                if (!data) return;

                cliComponentButtons.forEach(btn => btn.disabled = true);
                
                cliCommandEl.textContent = data.command;
                cliPreviewEl.innerHTML = `<span class="text-slate-500 text-sm">Preview will appear here</span>`;
                
                simpleTypeWriter(cliOutputEl, data.output, () => {
                    data.files.forEach(file => appState.cliAddedComponents.add(file));
                    renderFileExplorer();
                    cliPreviewEl.innerHTML = data.preview;
                    cliComponentButtons.forEach(btn => btn.disabled = false);
                });
            });
        });
        
        // --- Starter Kits Workflow Logic ---
        const workflowTabs = document.querySelectorAll('.workflow-tab');
        const workflowContents = document.querySelectorAll('.workflow-content');
        const simulationCommand = document.getElementById('simulation-command');
        const simulationOutput = document.getElementById('simulation-output');
        const simulationExplanation = document.getElementById('simulation-explanation');
        const workflowNext = document.getElementById('workflow-next');
        const workflowPrev = document.getElementById('workflow-prev');
        
        const workflowData = {
            ecommerce: [
                {
                    command: "npm create vite@latest my-storefront -- --template vue",
                    output: `
<span class="text-slate-400">Need to install the following packages:</span>
<span class="text-cyan-400">  create-vite@latest</span>
<span class="text-slate-400">Ok to proceed? (y)</span> <span class="text-green-400">y</span>

<span class="text-cyan-400">Vite</span> <span class="text-slate-500">v5.3.1</span>
<span class="text-green-400">‚úî</span> Project name: <span class="text-slate-500">‚Ä¶</span> <span class="text-cyan-400">my-storefront</span>
<span class="text-green-400">‚úî</span> Scaffolding project in <span class="text-cyan-400">./my-storefront</span>...

<span class="text-green-400">Done.</span> Now run:
  <span class="text-cyan-400">cd my-storefront</span>
  <span class="text-cyan-400">npm install</span>
  <span class="text-cyan-400">npm run dev</span>
                    `.trim(),
                    explanation: "A new Vite project is created. This sets up a minimal, fast, and modern Vue project with a build system ready to go."
                },
                {
                    command: "npx shadcn-vue@latest init",
                    output: `
<span class="text-green-400">‚úî</span> <span class="text-white">Would you like to use TypeScript (recommended)?</span> <span class="text-slate-500">‚Ä∫</span> <span class="text-cyan-400">Yes</span>
<span class="text-green-400">‚úî</span> <span class="text-white">Which style would you like to use?</span> <span class="text-slate-500">‚Ä∫</span> <span class="text-cyan-400">Default</span>
<span class="text-green-400">‚úî</span> <span class="text-white">Which color would you like to use as base color?</span> <span class="text-slate-500">‚Ä∫</span> <span class="text-cyan-400">Slate</span>
<span class="text-green-400">‚úî</span> <span class="text-white">Where is your tailwind.config.js located?</span> <span class="text-slate-500">‚Ä∫</span> <span class="text-cyan-400">tailwind.config.js</span>
<span class="text-green-400">‚úî</span> <span class="text-white">Configure import alias for components:</span> <span class="text-slate-500">‚Ä∫</span> <span class="text-cyan-400">@/components</span>
<span class="text-green-400">‚úî</span> <span class="text-white">Are you using a framework like Nuxt?</span> <span class="text-slate-500">‚Ä∫</span> <span class="text-cyan-400">No</span>

<span class="text-green-400">‚úî</span> <span class="text-white">Writing configuration to</span> <span class="text-cyan-400">components.json...</span>
<span class="text-green-400">‚úî</span> <span class="text-white">Done.</span>
                    `.trim(),
                    explanation: "The `shadcn-vue` CLI initializes the UI library. This configures Tailwind CSS, adds dependencies, and sets up the structure for UI components."
                },
                {
                    command: "npm install vue-router",
                    output: `
<span class="text-slate-400">added 1 package, and audited 1280 packages in 5s</span>

<span class="text-white">128 packages are looking for funding</span>
  <span class="text-white">run \`npm fund\` for details</span>
<span class="text-green-400">found 0 vulnerabilities</span>

<span class="text-slate-400">// Creating file: src/router/index.js</span>
<span class="text-cyan-400 line">import</span> { createRouter, createWebHistory } <span class="text-cyan-400">from</span> <span class="text-amber-400">'vue-router'</span>
<span class="text-cyan-400 line">const</span> routes = [ { path: <span class="text-amber-400">'/'</span>, component: () => <span class="text-cyan-400">import</span>(<span class="text-amber-400">'../views/Home.vue'</span>) } ]
<span class="text-cyan-400 line">export default</span> createRouter({ history: createWebHistory(), routes })
                    `.trim(),
                    explanation: "Vue Router is installed to handle client-side routing. A `router/index.js` file is created to define application paths."
                },
                {
                    command: "npm install pinia",
                    output: `
<span class="text-slate-400">added 2 packages, and audited 1282 packages in 3s</span>
<span class="text-green-400">found 0 vulnerabilities</span>

<span class="text-slate-400">// Creating file: src/stores/cart.js</span>
<span class="text-cyan-400 line">import</span> { defineStore } <span class="text-cyan-400">from</span> <span class="text-amber-400">'pinia'</span>
<span class="text-cyan-400 line">export const</span> useCartStore = defineStore(<span class="text-amber-400">'cart'</span>, {
<span class="text-cyan-400 line">  state: () => ({ items: [], total: 0 }),</span>
<span class="text-cyan-400 line">  actions: {</span>
<span class="text-cyan-400 line">    addItem(product) { <span class="text-slate-500">/* ... */</span> }</span>
<span class="text-cyan-400 line">  }</span>
<span class="text-cyan-400 line">})</span>
                    `.trim(),
                    explanation: "Pinia, the official state management library, is installed. This allows for a centralized store to manage application state, like a shopping cart."
                }
            ],
            blog: [
                {
                    command: "npm init -y && npm install express",
                    output: `
<span class="text-slate-400">Wrote to ./package.json:</span>
<span class="text-white">{
  "name": "blog-backend",
  "version": "1.0.0",
  ...
}</span>
<span class="text-slate-400">added 57 packages, and audited 58 packages in 4s</span>
<span class="text-green-400">found 0 vulnerabilities</span>
                    `.trim(),
                    explanation: "Initializes a Node.js project and installs Express.js. This creates a `package.json` and provides the foundation for the backend server."
                },
                {
                    command: "npx prisma init --datasource-provider postgresql",
                     output: `
<span class="text-green-400">‚úî</span> <span class="text-white">Your Prisma schema was created at</span> <span class="text-cyan-400">prisma/schema.prisma</span>
  <span class="text-white">You can now open it in your favorite editor.</span>

<span class="text-slate-400">Next steps:</span>
<span class="text-white">1. Set the</span> <span class="text-cyan-400">DATABASE_URL</span> <span class="text-white">in the</span> <span class="text-cyan-400">.env</span> <span class="text-white">file to point to your existing database.</span>
<span class="text-white">2. Run</span> <span class="text-cyan-400">npx prisma db pull</span> <span class="text-white">to turn your database schema into a Prisma schema.</span>
<span class="text-white">3. Run</span> <span class="text-cyan-400">npx prisma generate</span> <span class="text-white">to generate the Prisma Client.</span>
                    `.trim(),
                    explanation: "Prisma is initialized as the ORM. This sets up the database connection environment file and a `schema.prisma` file to define models like `User` and `Post`."
                },
                {
                    command: "touch server.js # Create API endpoints",
                    output: `
<span class="text-slate-400">// Creating file: server.js</span>
<span class="text-cyan-400 line">import</span> express <span class="text-cyan-400">from</span> <span class="text-amber-400">'express'</span>;
<span class="text-cyan-400 line">import</span> { PrismaClient } <span class="text-cyan-400">from</span> <span class="text-amber-400">'@prisma/client'</span>;
<span class="text-cyan-400 line">const</span> app = express();
<span class="text-cyan-400 line">const</span> prisma = <span class="text-cyan-400">new</span> PrismaClient();
<span class="text-cyan-400 line">
</span>
<span class="text-cyan-400 line">app.get(<span class="text-amber-400">'/posts'</span>, <span class="text-cyan-400">async</span> (req, res) => {
<span class="text-cyan-400 line">  const</span> posts = <span class="text-cyan-400">await</span> prisma.post.findMany();
<span class="text-cyan-400 line">  res.json(posts);
<span class="text-cyan-400 line">});
</span>
<span class="text-cyan-400 line">app.listen(3000, () => <span class="text-white">console</span>.log(<span class="text-amber-400">'Server running'</span>));</span>
                    `.trim(),
                    explanation: "API endpoints are created using the Express router. These endpoints handle HTTP requests and interact with the database via Prisma Client."
                },
                 {
                    command: "gcloud run deploy blog-service --source .",
                    output: `
<span class="text-white">Deploying container to</span> <span class="text-cyan-400">Cloud Run service [blog-service]</span> <span class="text-white">in project [...] region [...]</span>
<span class="text-green-400">‚úî</span> <span class="text-white">Deploying...</span>
<span class="text-green-400">‚úî</span> <span class="text-white">Creating Revision...</span>
<span class="text-green-400">‚úî</span> <span class="text-white">Routing traffic...</span>
<span class="text-green-400">Done.</span>
<span class="text-white">Service</span> <span class="text-cyan-400">[blog-service]</span> <span class="text-white">revision</span> <span class="text-cyan-400">[blog-service-00001-abc]</span> <span class="text-white">has been deployed and is serving 100% of traffic.</span>
<span class="text-white">Service URL:</span> <span class="text-amber-400">https://blog-service-xyz.a.run.app</span>
                    `.trim(),
                    explanation: "The application is containerized and deployed to a serverless platform like Google Cloud Run, providing a scalable, cost-effective hosting solution."
                }
            ]
        };

        function typeWriter(element, htmlContent, onComplete) {
            clearTimeout(appState.workflowAnimationTimeout);
            element.innerHTML = '';
            workflowNext.disabled = true;
            workflowPrev.disabled = true;

            const lines = htmlContent.split('\n').filter(line => line.trim() !== '');
            let lineIndex = 0;
            
            function printLine() {
                if (lineIndex < lines.length) {
                    element.innerHTML += lines[lineIndex] + '\n';
                    element.scrollTop = element.scrollHeight; // Auto-scroll
                    lineIndex++;
                    appState.workflowAnimationTimeout = setTimeout(printLine, 120);
                } else {
                    if (onComplete) onComplete();
                }
            }
            printLine();
        }

        function updateWorkflowUI() {
            const steps = document.querySelectorAll(`#workflow-${appState.currentWorkflow} .workflow-step`);
            steps.forEach((step, index) => {
                const icon = step.querySelector('.step-icon');
                if (index === appState.workflowStep) {
                    icon.classList.add('bg-sky-600', 'border-sky-400', 'text-white');
                    icon.classList.remove('bg-slate-700', 'border-transparent');
                } else {
                    icon.classList.remove('bg-sky-600', 'border-sky-400', 'text-white');
                    icon.classList.add('bg-slate-700', 'border-transparent');
                }
            });

            const currentWorkflowData = workflowData[appState.currentWorkflow];
            const stepData = currentWorkflowData[appState.workflowStep];

            if (stepData) {
                simulationCommand.textContent = stepData.command;
                simulationExplanation.textContent = stepData.explanation;
                typeWriter(simulationOutput, stepData.output, () => {
                     workflowPrev.disabled = appState.workflowStep <= 0;
                     workflowNext.disabled = appState.workflowStep >= currentWorkflowData.length - 1;
                });
            }

            workflowPrev.disabled = appState.workflowStep <= 0;
            workflowNext.disabled = appState.workflowStep >= currentWorkflowData.length - 1;
        }

        function resetWorkflow(workflowId) {
            appState.currentWorkflow = workflowId;
            appState.workflowStep = 0;
            updateWorkflowUI();
        }
        
        workflowTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const workflowId = tab.dataset.workflow;
                
                workflowTabs.forEach(t => {
                    t.classList.remove('active', 'text-sky-400', 'border-sky-500');
                    t.classList.add('text-slate-400', 'border-transparent', 'hover:text-slate-300', 'hover:border-slate-600');
                });
                tab.classList.add('active', 'text-sky-400', 'border-sky-500');
                tab.classList.remove('text-slate-400', 'border-transparent', 'hover:text-slate-300', 'hover:border-slate-600');

                workflowContents.forEach(content => {
                    content.classList.remove('active', 'fade-in');
                    if (!content.classList.contains('hidden')) content.classList.add('hidden');
                });
                document.getElementById(`workflow-${workflowId}`).classList.add('active', 'fade-in');
                document.getElementById(`workflow-${workflowId}`).classList.remove('hidden');

                resetWorkflow(workflowId);
            });
        });

        workflowNext.addEventListener('click', () => {
            const currentWorkflowData = workflowData[appState.currentWorkflow];
            if (appState.workflowStep < currentWorkflowData.length - 1) {
                appState.workflowStep++;
                updateWorkflowUI();
            }
        });

        workflowPrev.addEventListener('click', () => {
            if (appState.workflowStep > 0) {
                appState.workflowStep--;
                updateWorkflowUI();
            }
        });
        
        // --- CI/CD Webhooks Logic ---
        const generateUrlButton = document.getElementById('generate-url-button');
        const webhookUrlList = document.getElementById('webhook-url-list');
        const webhookUrlModal = document.getElementById('webhook-url-modal');
        const newWebhookUrlDisplay = document.getElementById('new-webhook-url-display');
        const modalCopyUrlButton = document.getElementById('modal-copy-url-button');
        const closeModalButton = document.getElementById('close-modal-button');

        function renderWebhookUrls() {
            if (appState.webhookUrls.length === 0) {
                webhookUrlList.innerHTML = '<p class="text-slate-500 text-sm">You haven\'t generated any webhook URLs yet.</p>';
            } else {
                webhookUrlList.innerHTML = appState.webhookUrls.map(url => `
                    <div class="bg-slate-800/80 p-3 rounded-md flex items-center justify-between">
                        <code class="text-amber-400 font-mono text-xs truncate pr-4">${url.display}</code>
                        <span class="text-xs text-slate-500">${url.createdAt}</span>
                    </div>
                `).join('');
            }
        }
        
        if (generateUrlButton) {
            generateUrlButton.addEventListener('click', () => {
                const uniqueId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
                const fullUrl = `https://api.projecthub.dev/webhooks/trigger/${uniqueId}`;
                const displayUrl = `https://api.projecthub.dev/webhooks/trigger/whk_${uniqueId.substring(0, 24)}...`;
                
                const newUrl = {
                    full: fullUrl,
                    display: displayUrl,
                    createdAt: new Date().toLocaleDateString()
                };
                
                appState.webhookUrls.push(newUrl);
                
                newWebhookUrlDisplay.textContent = newUrl.full;
                modalCopyUrlButton.dataset.fullUrl = newUrl.full;
                
                webhookUrlModal.classList.remove('hidden');
                renderWebhookUrls();
            });
        }

        if (modalCopyUrlButton) {
            modalCopyUrlButton.addEventListener('click', (e) => {
                copyToClipboard(e.currentTarget.dataset.fullUrl, e.currentTarget);
            });
        }
        
        if (closeModalButton) {
            closeModalButton.addEventListener('click', () => {
                webhookUrlModal.classList.add('hidden');
            });
        }

        // --- Build Analytics Logic ---
        function initAnalytics() {
            const buildHistoryData = [
                { id: 'a1b2c3d', commit: 'feat: add analytics dashboard', status: 'Success', date: '1 min ago', time: 84, bundle: 1210, vitals: { lcp: 1.8, fcp: 0.9, cls: 0.01, score: 98 } },
                { id: 'e4f5g6h', commit: 'fix: correct routing issue', status: 'Success', date: '2 hrs ago', time: 92, bundle: 1195, vitals: { lcp: 1.9, fcp: 1.0, cls: 0.02, score: 96 } },
                { id: 'i7j8k9l', commit: 'refactor: update api service', status: 'Success', date: '8 hrs ago', time: 88, bundle: 1190, vitals: { lcp: 1.7, fcp: 0.8, cls: 0.01, score: 99 } },
                { id: 'm0n1p2q', commit: 'feat: implement starter kits', status: 'Failed', date: '1 day ago', time: 115, bundle: 1150, vitals: { lcp: 2.6, fcp: 1.3, cls: 0.11, score: 85 } },
                { id: 'r3s4t5u', commit: 'docs: update readme', status: 'Success', date: '1 day ago', time: 75, bundle: 1100, vitals: { lcp: 1.9, fcp: 0.9, cls: 0.05, score: 95 } },
                 { id: 'v6w7x8y', commit: 'feat: add user profiles', status: 'Success', date: '2 days ago', time: 81, bundle: 1080, vitals: { lcp: 1.6, fcp: 0.8, cls: 0.03, score: 97 } },
                 { id: 'z9a8b7c', commit: 'chore: upgrade dependencies', status: 'Success', date: '3 days ago', time: 95, bundle: 1050, vitals: { lcp: 1.8, fcp: 1.0, cls: 0.04, score: 96 } },
                 { id: 'd6e5f4g', commit: 'fix: modal closing bug', status: 'Success', date: '4 days ago', time: 78, bundle: 980, vitals: { lcp: 1.5, fcp: 0.7, cls: 0.02, score: 99 } },
                 { id: 'h3i2j1k', commit: 'refactor: state management', status: 'Success', date: '5 days ago', time: 85, bundle: 975, vitals: { lcp: 1.7, fcp: 0.9, cls: 0.02, score: 98 } },
                 { id: 'l0m9n8p', commit: 'feat: initial project setup', status: 'Success', date: '5 days ago', time: 72, bundle: 950, vitals: { lcp: 1.4, fcp: 0.8, cls: 0.01, score: 100 } },
            ];
            
            const latestBuild = buildHistoryData[0];
            
            // Populate Key Metrics
            document.getElementById('analytics-build-time').textContent = `${Math.floor(latestBuild.time / 60)}m ${latestBuild.time % 60}s`;
            document.getElementById('analytics-bundle-size').textContent = `${(latestBuild.bundle / 1000).toFixed(2)} MB`;
            document.getElementById('analytics-lighthouse-score').textContent = latestBuild.vitals.score;

            // Render Web Vitals
            const webVitalsContainer = document.getElementById('analytics-web-vitals');
            const vitals = [
                { name: 'Largest Contentful Paint', acronym: 'LCP', value: `${latestBuild.vitals.lcp}s`, score: latestBuild.vitals.lcp < 2.5 ? 'good' : (latestBuild.vitals.lcp < 4 ? 'ni' : 'poor') },
                { name: 'First Contentful Paint', acronym: 'FCP', value: `${latestBuild.vitals.fcp}s`, score: latestBuild.vitals.fcp < 1.8 ? 'good' : (latestBuild.vitals.fcp < 3 ? 'ni' : 'poor') },
                { name: 'Cumulative Layout Shift', acronym: 'CLS', value: latestBuild.vitals.cls, score: latestBuild.vitals.cls < 0.1 ? 'good' : (latestBuild.vitals.cls < 0.25 ? 'ni' : 'poor') },
            ];
            webVitalsContainer.innerHTML = vitals.map(v => `
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <span class="w-3 h-3 rounded-full mr-3 vitals-${v.score} bg-current"></span>
                        <p class="text-slate-300">${v.name} (${v.acronym})</p>
                    </div>
                    <p class="font-semibold text-slate-100">${v.value}</p>
                </div>
            `).join('');

            // Render Build History
            const buildHistoryBody = document.getElementById('analytics-build-history');
            buildHistoryBody.innerHTML = buildHistoryData.slice(0, 5).map(b => `
                <tr class="border-b border-slate-800/80">
                    <td class="py-2 pr-2 truncate" title="${b.commit}">${b.commit}</td>
                    <td class="py-2 pr-2">
                        <span class="px-2 py-1 text-xs rounded-full ${b.status === 'Success' ? 'bg-green-900/50 text-green-300' : 'bg-red-900/50 text-red-300'}">${b.status}</span>
                    </td>
                    <td class="py-2 whitespace-nowrap">${b.date}</td>
                </tr>
            `).join('');
            
            const chartOptions = {
                maintainAspectRatio: false,
                scales: {
                    y: { 
                        beginAtZero: true, 
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: { color: '#94a3b8' }
                    },
                    x: { 
                        grid: { display: false },
                        ticks: { color: '#94a3b8' }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: '#1e293b',
                        titleColor: '#f1f5f9',
                        bodyColor: '#cbd5e1',
                        padding: 10,
                        cornerRadius: 4,
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index',
                },
            };

            // Build Time Chart
            const buildTimeCtx = document.getElementById('buildTimeChart');
            if(buildTimeCtx) {
                new Chart(buildTimeCtx, {
                    type: 'line',
                    data: {
                        labels: buildHistoryData.map(b => b.id).reverse(),
                        datasets: [{
                            label: 'Build Time (s)',
                            data: buildHistoryData.map(b => b.time).reverse(),
                            borderColor: '#38bdf8', // sky-400
                            backgroundColor: 'rgba(56, 189, 248, 0.1)',
                            fill: true,
                            tension: 0.3,
                            pointRadius: 2,
                            pointBackgroundColor: '#38bdf8',
                        }]
                    },
                    options: chartOptions,
                });
            }
            
            // Bundle Size Chart
            const bundleSizeCtx = document.getElementById('bundleSizeChart');
            if(bundleSizeCtx) {
                 new Chart(bundleSizeCtx, {
                    type: 'bar',
                    data: {
                        labels: ['app.js', 'vendors.js', 'styles.css', 'assets'],
                        datasets: [{
                            label: 'Size (KB)',
                            data: [450, 650, 85, 25], // Simulated data
                            backgroundColor: ['rgba(56, 189, 248, 0.5)', 'rgba(251, 146, 60, 0.5)', 'rgba(239, 68, 68, 0.5)', 'rgba(34, 197, 94, 0.5)'],
                            borderColor: ['#38bdf8', '#fb923c', '#ef4444', '#22c55e'],
                            borderWidth: 1,
                        }]
                    },
                    options: chartOptions,
                });
            }
        }


        // --- Dashboard Chart Logic ---
        const ctx = document.getElementById('frameworkChart');
        if (ctx) {
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Performance', 'Ecosystem', 'Learning Curve', 'Scalability', 'Tooling'],
                    datasets: [{
                        label: 'Vue.js',
                        data: [9, 8, 7, 8, 9],
                        backgroundColor: 'rgba(56, 189, 248, 0.2)',
                        borderColor: 'rgba(56, 189, 248, 1)',
                        pointBackgroundColor: 'rgba(56, 189, 248, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(56, 189, 248, 1)'
                    }, {
                        label: 'React',
                        data: [8, 9, 6, 9, 8],
                        backgroundColor: 'rgba(251, 146, 60, 0.2)',
                        borderColor: 'rgba(251, 146, 60, 1)',
                        pointBackgroundColor: 'rgba(251, 146, 60, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(251, 146, 60, 1)'
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255, 255, 255, 0.2)' },
                            grid: { color: 'rgba(255, 255, 255, 0.2)' },
                            pointLabels: { color: '#f1f5f9', font: { size: 12 } },
                            ticks: {
                                color: '#94a3b8',
                                backdropColor: 'rgba(0,0,0,0)',
                                stepSize: 2
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#cbd5e1'
                            }
                        }
                    }
                }
            });
        }
        
        // --- Initializations ---
        resetWorkflow('ecommerce');
        renderFileExplorer();
        renderWebhookUrls();

    });
</script>

</body>
</html>
